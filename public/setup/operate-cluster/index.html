<!DOCTYPE html><html lang="zh-TW"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:93.75%/1.45 'Roboto',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Roboto',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'Roboto',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'Roboto',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'Roboto',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'Roboto',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'Roboto',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;font-family:'Roboto',serif;font-weight:400;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}ul{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:0.85rem;line-height:1.45rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}blockquote{margin-left:1.45rem;margin-right:1.45rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.45rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.45rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li > ul{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.45rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}kbd{font-size:0.85rem;line-height:1.45rem;}samp{font-size:0.85rem;line-height:1.45rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.725rem;padding-bottom:calc(0.725rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#439ccd;}</style><link href="//fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet" type="text/css"/><title data-react-helmet="true">Configure &amp; Operate a Cluster | SonarQube 文件</title><link data-react-helmet="true" href="/SonarQubeChineseDoc8.1/favicon.ico" rel="icon"/><link data-react-helmet="true" href="/SonarQubeChineseDoclatest/setup/operate-cluster/" rel="canonical"/><script data-react-helmet="true" type="text/javascript">
            (function(window,document) {
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window, document,'script','https://www.google-analytics.com/analytics.js','ga');
              ga('create', 'UA-1880045-11' , 'auto');
              ga('send', 'pageview');
            })(window,document);
          </script><style data-href="/SonarQubeChineseDoc8.1/styles.425dae89dd90e0f406d7.css">#___gatsby,#___gatsby>div,.main-container,body,html{height:100%}iframe{width:100%;border:0}.blue-bar{background:#4c9bd6;height:5px;position:fixed;width:100%;z-index:100}.layout-page{align-items:stretch;display:flex;flex-grow:1;height:100%;width:100%}.page-sidebar{flex-grow:0;flex-shrink:0;padding:26px 26px 0;width:320px;display:flex;flex-direction:column}.page-sidebar,.page-sidebar-inner{background-color:#f9f9fb;height:100%}.page-sidebar-inner{overflow:auto;position:fixed}.sidebar-header{border-bottom:1px solid #cfd3d7;padding-bottom:10px;margin-right:-6px}.sidebar-logo{vertical-align:top;margin:0}.sidebar-footer{border-top:1px solid #cfd3d7;flex-grow:0;font-size:12px}.sidebar-footer a{position:relative;display:inline-block;text-decoration:none;color:rgba(0,0,0,.8);line-height:30px;margin:10px 10px 10px -8px;padding:0 8px;border-radius:3px}.sidebar-footer a img,.sidebar-footer a svg{height:16px;color:#8a8c8f;margin-right:5px;margin-bottom:0;-webkit-transform:translateY(2px);transform:translateY(2px)}.sidebar-footer a.icon-only img{height:12px;margin-right:0}.sidebar-footer a:hover{background:#e8eff5}.page-sidebar .alert{margin:16px 0}.page-sidebar a .tooltip{opacity:0;background:rgba(0,0,0,.8);color:#fff;font-size:12px;border-radius:3px;line-height:24px;padding:0 8px;position:absolute;top:-30px;left:-50px;white-space:nowrap;-webkit-transition:opacity .2s ease;transition:opacity .2s ease}.page-sidebar a .tooltip:after{top:100%;right:20px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:6px solid transparent;border-top-color:rgba(0,0,0,.8);margin-left:-6px}.page-sidebar a:hover .tooltip{opacity:1;display:block}.page-main{background:#fff;display:flex;flex-direction:column;flex-grow:1;margin-left:330px;min-height:100%;min-width:740px;padding:20px 20px 0;z-index:50}.search-container{position:relative}.search-container button{position:absolute;right:8px;top:50%;margin-top:-12px;height:16px;width:16px;background:transparent;border:none;cursor:pointer;outline:none;border-radius:3px;-webkit-transition:border-color .2s ease,box-shadow .2s ease;transition:border-color .2s ease,box-shadow .2s ease}.search-container button svg{position:absolute;top:4px;left:4px}.search-container button:focus,.search-container button:hover{background-color:#989898}.search-container button:focus svg,.search-container button:hover svg{color:#fff}.search-container button:focus{box-shadow:0 0 0 3px rgba(35,106,151,.25)}.search-input{border:1px solid #cfd3d7;border-radius:2px;width:calc(100% - 10px);margin-left:10px;margin-bottom:10px;padding:0 30px 0 10px;font-size:14px;line-height:30px;outline:none}.search-input:focus,.search-input:hover{border:1px solid #8a8c8f}a.search-result{color:#444;font-weight:400;text-decoration:none;display:block;padding:8px;margin-right:-10px}a.search-result.active,a.search-result.active mark{color:#2679af}a.search-result:hover{background:#e8eff5;border-radius:3px}a.search-result mark{color:#444;font-weight:700;background:0 0}a.search-result .note{margin:6px 0;font-size:12px}.page-indexes{padding:16px 20px 50px 16px;margin:10px -26px 0;flex-grow:1;overflow:auto}.page-indexes>div>a.search-result{margin:0 -4px 0 4px}.page-indexes-link{color:#2d3032;font-size:16px;font-weight:500;line-height:35px;padding:0 10px;margin:0 -10px 0 0;border-radius:3px;-webkit-transition:all .2s ease;transition:all .2s ease}.page-indexes-link:hover{background-color:#e8eff5;color:#2679af}.page-indexes-link.active{font-weight:700;color:#2679af}.page-indexes-link,.sub-menu-link{color:inherit;text-decoration:inherit;display:block}.sub-menu .page-indexes-link,.sub-menu .sub-menu{margin-left:-10px}.page-indexes-link svg{float:right;-webkit-transform:translateY(9px);transform:translateY(9px)}.sub-menu{padding:0 0 10px 22px}.sub-menu-link{font-size:14px;line-height:26px;margin:0}.sub-menu-link.active,.sub-menu-link:hover{color:#2679af}.sub-menu-link.active{font-weight:700}.page-container{max-width:900px;min-width:320px;padding-left:16px;padding-right:16px;font-size:15px;flex-grow:1;margin:0 auto}.page-container .headings-container{width:200px;float:right;margin-top:80px}.page-container .headings-container-fixed{position:fixed;width:inherit;padding-left:26px;border-left:1px solid #cfd3d7;z-index:100;background:#fff}.page-container .headings-container span{font-weight:700}.page-container .headings-container ul{margin:10px 0 0;padding:0}.page-container .headings-container li{list-style:none;margin:0 0 8px;line-height:16px}.page-container .headings-container a{color:rgba(0,0,0,.8);display:block;font-size:13px;color:#2d3032;text-decoration:inherit;border-bottom:none!important}.page-container .headings-container a.active,.page-container .headings-container a:hover{color:#2679af}.page-container .headings-container a.active{font-weight:700}.markdown-container{width:680px;margin:0 auto;padding-top:24px;padding-bottom:24px}.headings-container+.markdown-container{max-width:900px;width:auto;padding-right:220px}.markdown-content img[src$=".svg"]{position:relative;top:-2px;vertical-align:text-bottom}.page-container h1{font-size:26px;font-weight:700}.page-container h2{font-size:21px;font-weight:700}.page-container h3{font-size:18px;font-weight:700}.page-container h2,.page-container h3{margin-top:32px;margin-bottom:14px}.page-container p{margin-bottom:14px}.page-container ul{margin-bottom:14px;padding-left:16px}.page-container li{margin-bottom:6px}.page-container li p{margin-bottom:0}.page-container li ul{margin-top:8px}.page-container pre{white-space:pre-wrap;word-wrap:break-word}.page-footer{border-top:1px solid #ced2d6;font-size:13px;margin:10px 10px 0;padding:12px 0}.page-footer img{float:right;margin-left:10px}.version-select{position:relative;font-size:19px;margin-top:12px;max-width:calc(100% - 160px);text-align:right;float:right;border-radius:4px}.version-select>button{padding:2px 4px;background:transparent;border:0;cursor:pointer;outline:none}.version-select:hover{background:#e8eff5}.version-select ul{z-index:1000;position:absolute;display:block;top:100%;margin-top:4px;right:0;border:1px solid #cfd3d7;background:#fff;text-align:left;border-radius:4px}.version-select ul li{list-style:none;font-size:15px;margin:0;padding:4px 16px;text-align:left;-webkit-transition:all .2s ease;transition:all .2s ease;white-space:nowrap}.version-select ul li:hover{background:#f3f3f3}.version-select ul li span{color:#b58a13;font-weight:700}.version-select ul li span.current{color:#499cd2}.version-select ul li a{color:inherit;text-decoration:inherit}.version-select span{color:#b58a13;font-weight:700;padding-right:4px}.version-select span.current{color:#499cd2}.targetted-heading{border-left:4px solid #499cd2;margin-left:-10px;padding-left:6px}.alert{display:block;margin:0 -1em 1.5rem;border:1px solid #3e7fb7;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTEwLjMzMyAxMi4zNzV2LTEuNDU4YS4yODguMjg4IDAgMCAwLS4yOTEtLjI5MmgtLjg3NVY1Ljk1OGEuMjg4LjI4OCAwIDAgMC0uMjkyLS4yOTFINS45NThhLjI4OC4yODggMCAwIDAtLjI5MS4yOTF2MS40NTljMCAuMTY0LjEyNy4yOTEuMjkxLjI5MWguODc1djIuOTE3aC0uODc1YS4yODguMjg4IDAgMCAwLS4yOTEuMjkydjEuNDU4YzAgLjE2NC4xMjcuMjkyLjI5MS4yOTJoNC4wODRhLjI4OC4yODggMCAwIDAgLjI5MS0uMjkyek05LjE2NyA0LjIwOFYyLjc1YS4yODguMjg4IDAgMCAwLS4yOTItLjI5MmgtMS43NWEuMjg4LjI4OCAwIDAgMC0uMjkyLjI5MnYxLjQ1OGMwIC4xNjQuMTI4LjI5Mi4yOTIuMjkyaDEuNzVhLjI4OC4yODggMCAwIDAgLjI5Mi0uMjkyek0xNSA4YzAgMy44NjUtMy4xMzUgNy03IDdzLTctMy4xMzUtNy03IDMuMTM1LTcgNy03IDcgMy4xMzUgNyA3eiIgZmlsbD0iIzRiOWZkNSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9zdmc+);background-color:#edf6fc;background-position:10px 15px;background-repeat:no-repeat;background-size:24px;padding:1em 1em 1em 40px;color:#000;border-radius:3px}.alert a{padding-bottom:1px;text-decoration:none;-webkit-transition:border-bottom-color .2s ease 0s;transition:border-bottom-color .2s ease 0s;border-bottom:1px solid rgba(62,127,183,.3);color:#3e7fb7;font-weight:700}.alert a:focus,.alert a:hover{border-bottom:1px solid #0d476c;color:#0d476c}.alert>p{margin:0}.alert-danger{border-color:#d75a4a;background-color:#fcedec;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTExLjQ3MyAxMC4wNmEuNTguNTggMCAwIDAtLjE3NC0uNDFMOS42NSA4bDEuNjUtMS42NWEuNTguNTggMCAwIDAgMC0uODNsLS44Mi0uODJhLjU4LjU4IDAgMCAwLS44MyAwTDggNi4zNSA2LjM1IDQuN2EuNTguNTggMCAwIDAtLjgzIDBsLS44Mi44MmEuNTguNTggMCAwIDAgMCAuODNMNi4zNSA4IDQuNyA5LjY1YS41OC41OCAwIDAgMCAwIC44M2wuODIuODJjLjExLjEwOS4yNjUuMTczLjQyLjE3M2EuNTguNTggMCAwIDAgLjQxLS4xNzRMOCA5LjY1bDEuNjUgMS42NWEuNTguNTggMCAwIDAgLjgzIDBsLjgyLS44MmEuNjAxLjYwMSAwIDAgMCAuMTczLS40MnpNMTUgOGMwIDMuODY1LTMuMTM1IDctNyA3cy03LTMuMTM1LTctNyAzLjEzNS03IDctNyA3IDMuMTM1IDcgN3oiIGZpbGw9IiNkNDMzM2YiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==)}.alert-danger a{border-bottom:1px solid rgba(215,90,74,.3);color:#d75a4a}.alert-danger a:focus,.alert-danger a:hover{border-bottom:1px solid #a82f1f;color:#a82f1f}.alert-warning{border-color:#c99916;background-color:#ffefbc;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMy4zNiAyMC4wODgiPjxkZWZzPjxzdHlsZT4uY2xzLTF7ZmlsbDojY2RhMjUxfTwvc3R5bGU+PC9kZWZzPjxnIGlkPSJkYW5nZXIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTM1Ljg1NykiPjxnIGlkPSJHcm91cGVfNTcyMiIgZGF0YS1uYW1lPSJHcm91cGUgNTcyMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAzNS44NTcpIj48ZyBpZD0iR3JvdXBlXzU3MjEiIGRhdGEtbmFtZT0iR3JvdXBlIDU3MjEiPjxwYXRoIGlkPSJUcmFjw6lfOTU2NCIgZGF0YS1uYW1lPSJUcmFjw6kgOTU2NCIgY2xhc3M9ImNscy0xIiBkPSJNMjMuMDU5IDUyLjc2M2wtOS41ODItMTUuODkxYTIuMSAyLjEgMCAwIDAtMy41OTQgMEwuMyA1Mi43NjNhMi4xIDIuMSAwIDAgMCAxLjggMy4xODJoMTkuMTYyYTIuMSAyLjEgMCAwIDAgMS44LTMuMTgyem0tMS4yOTQgMS4zNjhhLjU3OS41NzkgMCAwIDEtLjUuMjk0SDIuMWEuNTc4LjU3OCAwIDAgMS0uNDk1LS44NzZsOS41ODItMTUuODkxYS41NzguNTc4IDAgMCAxIC45ODkgMGw5LjU4MiAxNS44OTFhLjU3OC41NzggMCAwIDEgLjAwNy41ODJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0zNS44NTcpIi8+PC9nPjwvZz48ZyBpZD0iR3JvdXBlXzU3MjQiIGRhdGEtbmFtZT0iR3JvdXBlIDU3MjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjY1NyA0Mi4xMTQpIj48ZyBpZD0iR3JvdXBlXzU3MjMiIGRhdGEtbmFtZT0iR3JvdXBlIDU3MjMiPjxwYXRoIGlkPSJUcmFjw6lfOTU2NSIgZGF0YS1uYW1lPSJUcmFjw6kgOTU2NSIgY2xhc3M9ImNscy0xIiBkPSJNMjM0LjYwOCAxNzMuMDA1Yy0uNTc5IDAtMS4wMy4zMS0xLjAzLjg2MSAwIDEuNjc5LjIgNC4wOTIuMiA1Ljc3MSAwIC40MzcuMzgxLjYyMS44MzMuNjIxLjMzOSAwIC44MTgtLjE4My44MTgtLjYyMSAwLTEuNjc5LjItNC4wOTIuMi01Ljc3MWEuOTA3LjkwNyAwIDAgMC0xLjAyMS0uODYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIzMy41NzggLTE3My4wMDUpIi8+PC9nPjwvZz48ZyBpZD0iR3JvdXBlXzU3MjYiIGRhdGEtbmFtZT0iR3JvdXBlIDU3MjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjYxNCA1MC4zNDEpIj48ZyBpZD0iR3JvdXBlXzU3MjUiIGRhdGEtbmFtZT0iR3JvdXBlIDU3MjUiPjxwYXRoIGlkPSJUcmFjw6lfOTU2NiIgZGF0YS1uYW1lPSJUcmFjw6kgOTU2NiIgY2xhc3M9ImNscy0xIiBkPSJNMjMzLjczOCAzNTMuMzA2YTEuMDg3IDEuMDg3IDAgMSAwIDAgMi4xNzMgMS4wODcgMS4wODcgMCAwIDAgMC0yLjE3M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMzIuNjUxIC0zNTMuMzA2KSIvPjwvZz48L2c+PC9nPjwvc3ZnPg==)}.alert-warning a{border-bottom:1px solid rgba(201,153,22,.3);color:#c99916}.alert-warning a:focus,.alert-warning a:hover{border-bottom:1px solid #9b7713;color:#9b7713}.alert-success{border-color:#3ec92c;background-color:#ecfcf2;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTEyLjcwMyA2LjUyM2EuNTkzLjU5MyAwIDAgMC0uMTY0LS40MTlsLS44My0uODJhLjU4LjU4IDAgMCAwLS40MS0uMTczLjU4LjU4IDAgMCAwLS40MS4xNzNsLTMuNzE4IDMuNzEtMi4wNi0yLjA2YS41OC41OCAwIDAgMC0uNDEtLjE3NC41OC41OCAwIDAgMC0uNDEuMTc0bC0uODMuODJhLjU5My41OTMgMCAwIDAtLjE2NC40MmMwIC4xNTQuMDU1LjMuMTY0LjQxbDMuMyAzLjI5OWMuMTA5LjExLjI2NC4xNzMuNDEuMTczLjE1NSAwIC4zMS0uMDY0LjQxOS0uMTczbDQuOTUtNC45NWEuNTcxLjU3MSAwIDAgMCAuMTYzLS40MXpNMTUgOGMwIDMuODY1LTMuMTM1IDctNyA3cy03LTMuMTM1LTctNyAzLjEzNS03IDctNyA3IDMuMTM1IDcgN3oiIGZpbGw9IiMwYTAiIGZpbGwtcnVsZT0ibm9uemVybyIvPjwvc3ZnPg==)}.alert-success a{border-bottom:1px solid rgba(62,201,44,.3);color:#3ec92c}.alert-success a:focus,.alert-success a:hover{border-bottom:1px solid #138b04;color:#138b04}.alert svg{vertical-align:middle;-webkit-transform:translateY(-1px);transform:translateY(-1px)}.page-sidebar .alert{margin-top:16px;font-size:12px}.page-container a,.page-footer a{text-decoration:none;color:#347cab;border-bottom:1px solid rgba(52,124,171,.3);-webkit-transition:all .2s ease 0s;transition:all .2s ease 0s}.page-container a:focus,.page-container a:hover,.page-footer a:focus,.page-footer a:hover{border-bottom:1px solid #0d476c;color:#0d476c}.page-container p{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}ul>ul{margin-bottom:0!important}.page-container pre{border:1px solid #e6e6e6;border-radius:2px;background-color:#f9f9fb;padding:12px;margin:0 0 1.5rem;line-height:16px}.page-container pre code{font-size:12px}.collapse{border:1px solid #e6e6e6;border-radius:2px;background-color:#f9f9fb;padding:12px;margin:0 0 1.5rem}.collapse div>a:first-child{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTcuNzIgMTEuNTk2TDMuMTE5IDYuOTkyQS4zODIuMzgyIDAgMCAxIDMgNi43MTNjMC0uMTA4LjA0LS4yLjExOC0uMjc5bDEuMDMtMS4wM2EuMzgyLjM4MiAwIDAgMSAuMjc4LS4xMTdjLjEwOCAwIC4yMDEuMDQuMjguMTE3TDggOC43bDMuMjk0LTMuMjk1YS4zODIuMzgyIDAgMCAxIC4yOC0uMTE3Yy4xMDggMCAuMi4wNC4yNzkuMTE3bDEuMDMgMS4wM2EuMzgyLjM4MiAwIDAgMSAuMTE3LjI4YzAgLjEwNy0uMDQuMi0uMTE4LjI3OEw4LjI4IDExLjU5NmEuMzgyLjM4MiAwIDAgMS0uMjc5LjExNy4zODIuMzgyIDAgMCAxLS4yOC0uMTE3eiIgZmlsbD0iIzIzNmE5NyIvPjwvc3ZnPg==) no-repeat 0 50%;padding-left:20px;color:#4c9bd6;display:block;cursor:pointer;margin-bottom:.5rem;font-size:16px;text-decoration:none;border-bottom:none;-webkit-transition:all .2s ease 0s;transition:all .2s ease 0s}.collapse div>a:first-child:hover{color:#195f8d}.collapse.close div>a:first-child{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxLjQxNCI+PHBhdGggZD0iTTExLjU5NiA4LjI4bC00LjYwNCA0LjYwMmEuMzgyLjM4MiAwIDAgMS0uMjc5LjExOC4zODIuMzgyIDAgMCAxLS4yNzktLjExOGwtMS4wMy0xLjAzYS4zODIuMzgyIDAgMCAxLS4xMTctLjI3OGMwLS4xMDguMDQtLjIwMS4xMTctLjI4TDguNyA4IDUuNDA0IDQuNzA2YS4zODIuMzgyIDAgMCAxLS4xMTctLjI4YzAtLjEwOC4wNC0uMi4xMTctLjI3OWwxLjAzLTEuMDNBLjM4Mi4zODIgMCAwIDEgNi43MTQgM2MuMTA3IDAgLjIuMDQuMjc4LjExOGw0LjYwNCA0LjYwM2EuMzgyLjM4MiAwIDAgMSAuMTE3LjI3OWMwIC4xMDgtLjA0LjIwMS0uMTE3LjI4eiIgZmlsbD0iIzIzNmE5NyIvPjwvc3ZnPg==) no-repeat 0 50%}.collapse.close div>*{display:none}.collapse.close div>a:first-child{margin:0}.collapse div :last-child{margin-bottom:0}.collapse div .alert{margin:0 .5em 1.5rem}img[src$="/images/check.svg"],img[src$="/images/cross.svg"],img[src$="/images/exclamation.svg"],img[src$="/images/info.svg"]{margin-bottom:0;top:0!important}.plugin-meta-data{margin:16px 0;padding:16px 16px 8px;background:#f9f9fb;border:1px solid #e6e6e6;border-radius:3px}.plugin-meta-data a svg{margin-right:8px}.plugin-meta-data-header{border-bottom:1px solid #cfd3d7;padding-bottom:16px}.plugin-meta-data-header,.plugin-meta-data-version-links,.plugin-meta-data-version-release-info{display:flex}.plugin-meta-data-header>*+*,.plugin-meta-data-version-release-info>*+*,.plugin-meta-data-version-release-links>*+*{margin-left:16px}.plugin-meta-data-header>*+*{padding-left:16px;border-left:1px solid #cfd3d7}.plugin-meta-data-versions{margin-top:16px}.plugin-meta-data-versions-show-more{font-size:14px;float:right;color:#51575a;border-color:#7b8184;border-width:0 0 1px;padding-left:0;padding-right:0;background:transparent;cursor:pointer}.plugin-meta-data-versions-show-more:hover{color:#2d3032;border-color:#2d3032}.plugin-meta-data-version{margin-bottom:16px}.plugin-meta-data-version+.plugin-meta-data-version{padding-top:8px;border-top:1px dashed #cfd3d7}.plugin-meta-data-version-version{font-weight:700;font-size:18px}.plugin-meta-data-version-release-info{margin-top:8px;font-style:italic}.plugin-meta-data-version-release-description,.plugin-meta-data-version-release-links{margin-top:8px}</style><meta name="generator" content="Gatsby 2.2.8"/><link as="script" rel="preload" href="/SonarQubeChineseDoc8.1/component---src-templates-page-tsx-6a082d362ed1573cad1f.js"/><link as="script" rel="preload" href="/SonarQubeChineseDoc8.1/5-48610aee5c94767ee2f4.js"/><link as="script" rel="preload" href="/SonarQubeChineseDoc8.1/app-56784aebc704702bb251.js"/><link as="script" rel="preload" href="/SonarQubeChineseDoc8.1/styles-9b5ac6bbef0df6896858.js"/><link as="script" rel="preload" href="/SonarQubeChineseDoc8.1/webpack-runtime-d2c6350ccab5ba4688c9.js"/><link as="fetch" rel="preload" href="/SonarQubeChineseDoc8.1/static/d/612/path---setup-operate-cluster-309-7af-pXP4J7Ex7i4eOkpg42ze9ADrUNA.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="main-container"><div class="blue-bar"></div><div class="layout-page"><div class="page-sidebar-inner"><div class="page-sidebar"><div class="sidebar-header"><a href="/SonarQubeChineseDoc8.1/"><img alt="Continuous Code Quality" class="sidebar-logo" src="/SonarQubeChineseDoc8.1/images/SonarQubeIcon.svg" title="Continuous Code Quality" width="160"/></a><div class="version-select"><button type="button">Docs <span class="current">8.1</span></button></div></div><div class="page-indexes"><div class="search-container"><input type="search" aria-label="Search" class="search-input" placeholder="Search..." value=""/></div><nav><div><a class="page-indexes-link" href="/SonarQubeChineseDoc8.1/architecture/architecture-integration/">架構與整合</a></div><div><a class="page-indexes-link" href="#"><svg height="16" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421" version="1.1" viewBox="0 0 16 16" width="16" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M3.2,5.6c0-0.1,0-0.2,0.1-0.3c0.2-0.2,0.5-0.2,0.6,0l4.1,4.1l4.1-4.1c0.2-0.2,0.5-0.2,0.6,0 c0.2,0.2,0.2,0.5,0,0.6c0,0,0,0,0,0l0,0l-4.5,4.5c-0.2,0.2-0.5,0.2-0.6,0l0,0L3.3,5.9C3.2,5.9,3.2,5.7,3.2,5.6z" style="fill:currentColor"></path></svg>Requirements</a></div><div><a class="page-indexes-link" href="#"><svg height="16" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421" version="1.1" viewBox="0 0 16 16" width="16" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M3.2,5.6c0-0.1,0-0.2,0.1-0.3c0.2-0.2,0.5-0.2,0.6,0l4.1,4.1l4.1-4.1c0.2-0.2,0.5-0.2,0.6,0 c0.2,0.2,0.2,0.5,0,0.6c0,0,0,0,0,0l0,0l-4.5,4.5c-0.2,0.2-0.5,0.2-0.6,0l0,0L3.3,5.9C3.2,5.9,3.2,5.7,3.2,5.6z" style="fill:currentColor"></path></svg>Setup and Upgrade</a></div><div><a class="page-indexes-link" href="#"><svg height="16" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421" version="1.1" viewBox="0 0 16 16" width="16" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M3.2,5.6c0-0.1,0-0.2,0.1-0.3c0.2-0.2,0.5-0.2,0.6,0l4.1,4.1l4.1-4.1c0.2-0.2,0.5-0.2,0.6,0 c0.2,0.2,0.2,0.5,0,0.6c0,0,0,0,0,0l0,0l-4.5,4.5c-0.2,0.2-0.5,0.2-0.6,0l0,0L3.3,5.9C3.2,5.9,3.2,5.7,3.2,5.6z" style="fill:currentColor"></path></svg>Analyzing Source Code</a></div><div><a class="page-indexes-link" href="#"><svg height="16" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421" version="1.1" viewBox="0 0 16 16" width="16" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M3.2,5.6c0-0.1,0-0.2,0.1-0.3c0.2-0.2,0.5-0.2,0.6,0l4.1,4.1l4.1-4.1c0.2-0.2,0.5-0.2,0.6,0 c0.2,0.2,0.2,0.5,0,0.6c0,0,0,0,0,0l0,0l-4.5,4.5c-0.2,0.2-0.5,0.2-0.6,0l0,0L3.3,5.9C3.2,5.9,3.2,5.7,3.2,5.6z" style="fill:currentColor"></path></svg>User Guide</a></div><div><a class="page-indexes-link" href="#"><svg height="16" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421" version="1.1" viewBox="0 0 16 16" width="16" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M3.2,5.6c0-0.1,0-0.2,0.1-0.3c0.2-0.2,0.5-0.2,0.6,0l4.1,4.1l4.1-4.1c0.2-0.2,0.5-0.2,0.6,0 c0.2,0.2,0.2,0.5,0,0.6c0,0,0,0,0,0l0,0l-4.5,4.5c-0.2,0.2-0.5,0.2-0.6,0l0,0L3.3,5.9C3.2,5.9,3.2,5.7,3.2,5.6z" style="fill:currentColor"></path></svg>Project Administration</a></div><div><a class="page-indexes-link" href="#"><svg height="16" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421" version="1.1" viewBox="0 0 16 16" width="16" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M3.2,5.6c0-0.1,0-0.2,0.1-0.3c0.2-0.2,0.5-0.2,0.6,0l4.1,4.1l4.1-4.1c0.2-0.2,0.5-0.2,0.6,0 c0.2,0.2,0.2,0.5,0,0.6c0,0,0,0,0,0l0,0l-4.5,4.5c-0.2,0.2-0.5,0.2-0.6,0l0,0L3.3,5.9C3.2,5.9,3.2,5.7,3.2,5.6z" style="fill:currentColor"></path></svg>Instance Administration</a></div><div><a class="page-indexes-link" href="#"><svg height="16" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421" version="1.1" viewBox="0 0 16 16" width="16" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M3.2,5.6c0-0.1,0-0.2,0.1-0.3c0.2-0.2,0.5-0.2,0.6,0l4.1,4.1l4.1-4.1c0.2-0.2,0.5-0.2,0.6,0 c0.2,0.2,0.2,0.5,0,0.6c0,0,0,0,0,0l0,0l-4.5,4.5c-0.2,0.2-0.5,0.2-0.6,0l0,0L3.3,5.9C3.2,5.9,3.2,5.7,3.2,5.6z" style="fill:currentColor"></path></svg>Extension Guide</a></div><div><a class="page-indexes-link" href="/SonarQubeChineseDoc8.1/faq/">Frequently Asked Questions</a></div></nav></div><div class="sidebar-footer"><a href="https://www.sonarqube.org/" rel="noopener noreferrer" target="_blank"><svg height="16" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421" version="1.1" viewBox="0 0 48 48" width="16" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M45.68 22.86a1.31 1.31 0 0 0-1.32 1.32v12a5.91 5.91 0 0 1-5.9 5.91H9.54a5.91 5.91 0 0 1-5.9-5.91V24A1.32 1.32 0 0 0 1 24v12.16a8.56 8.56 0 0 0 8.54 8.55h28.92A8.56 8.56 0 0 0 47 36.16v-12a1.32 1.32 0 0 0-1.32-1.3z" style="fill:currentColor"></path><path d="M23.07 34.24a1.36 1.36 0 0 0 .93.39 1.32 1.32 0 0 0 .93-.39l8.37-8.38A1.32 1.32 0 0 0 31.44 24l-6.12 6.13V3.39a1.32 1.32 0 0 0-2.64 0v26.74L16.55 24a1.32 1.32 0 0 0-1.86 1.86z" style="fill:currentColor"></path></svg> SonarQube</a><a href="https://community.sonarsource.com/" rel="noopener noreferrer" target="_blank"><img alt="Community" src="/SonarQubeChineseDoc8.1/images/community.svg"/> Community</a><a class="icon-only" href="https://twitter.com/SonarQube" rel="noopener noreferrer" target="_blank"><img alt="Twitter" src="/SonarQubeChineseDoc8.1/images/twitter.svg"/></a><a class="icon-only" href="https://www.sonarqube.org/whats-new/" rel="noopener noreferrer" target="_blank"><img alt="Product News" src="/SonarQubeChineseDoc8.1/images/newspaper.svg"/><span class="tooltip">Product News</span></a></div></div></div><div class="page-main"><div class="page-container"><div class="markdown-container"><h1>Configure &amp; Operate a Cluster</h1><div class="markdown-content"><p><em>High Availability and cluster scalability are features of the <a href="https://redirect.sonarsource.com/editions/datacenter.html" target="_blank">Data Center Edition</a>.</em></p>
<p>Once the <a href="/SonarQubeChineseDoc8.1/setup/install-cluster/">SonarQube cluster is installed</a>, you have a High Availability configuration that allows your SonarQube instance to stay up and running even if there is a crash or failure in one of the cluster's nodes. Your SonarQube cluster is also scalable, and you can add application nodes to increase your computing capabilities.</p>
<h2 id="header-1">Start, Stop, or Upgrade the Cluster</h2>
<h3>Start the Cluster</h3>
<p>To start a cluster, you need to follow these steps in order:</p>
<ol>
<li>Start the search nodes</li>
<li>Start the application nodes</li>
</ol>
<h3>Stop the Cluster</h3>
<p>To stop a cluster, you need to follow these steps in order:</p>
<ol>
<li>Stop the application nodes</li>
<li>Stop the search nodes</li>
</ol>
<h3>Upgrade SonarQube</h3>
<ol>
<li>Stop the cluster.</li>
<li>Upgrade SonarQube on all nodes (application part, plugins, JDBC driver if required) following the usual upgrade procedure but without triggering the /setup phase.</li>
<li>Once all nodes have the same binaries: restart the cluster.</li>
<li>At this point, only one of the application nodes is up. Try to access <code>node_ip:port/setup</code> on each application node, and trigger the setup operation on the one that responds.</li>
</ol>
<h2 id="header-2">Start or Stop a Node</h2>
<p>You can start or stop a single node in the same way as starting and stopping an instance using a single server. By default, it's a graceful shutdown where no new analysis report processing can start, but the tasks in progress are allowed to finish.</p>
<h2 id="header-3">Install or Upgrade a Plugin</h2>
<ol>
<li>Stop the application nodes.</li>
<li>
<p>Install or upgrade the plugin on the application nodes.</p>
<ul>
<li>If upgrading, remove the old version.</li>
<li>You don't need to install plugins on search nodes.</li>
</ul>
</li>
<li>Restart the application nodes.</li>
</ol>
<h2 id="header-4">Scalability</h2>
<p>You have the option of adding application nodes (up to 10 total application nodes) to your cluster to increase computing capabilities. </p>
<h3>Adding an Application Node</h3>
<p>To add an Application Node:</p>
<ol>
<li>
<p>Configure your new application node in sonar.properties. The following is an example of the configuration to be added to sonar.properties for a sixth application node (server6, ip6) in a cluster with the default five servers:</p>
<p><strong>server6</strong></p>
<pre><code>...
sonar.cluster.enabled=true
sonar.cluster.hosts=ip1,ip2,ip6
sonar.cluster.search.hosts=ip3,ip4,ip5
sonar.cluster.node.type=application
sonar.auth.jwtBase64Hs256Secret=YOURGENERATEDSECRET
...
</code></pre>
</li>
<li>
<p>Update the configuration of the preexisting nodes to include your new node. </p>
<p>While you don't need to restart the cluster after adding a node, you should ensure the configuration is up to date on all of your nodes to avoid issues when you eventually do need to restart.</p>
</li>
</ol>
<h3>Removing an Application Node</h3>
<p>When you remove an application node, make sure to update the configuration of the remaining nodes. Much like adding a node, while you don't need to restart the cluster after removing a node, you should ensure the configuration is up to date on all of your nodes to avoid issues when you eventually do need to restart.</p>
<h2 id="header-5">Monitoring</h2>
<p>CPU and RAM usage on each node have to be monitored separately with an APM. </p>
<p>In addition, we provide a Web API <em>api/system/health</em> you can use to validate that all of the nodes in your cluster are operational.  </p>
<ul>
<li>GREEN: SonarQube is fully operational</li>
<li>YELLOW: SonarQube is usable, but it needs attention in order to be fully operational</li>
<li>RED: SonarQube is not operational</li>
</ul>
<p>To call it from a monitoring system without having to give admin credentials, it is possible to setup a System Passcode through the property <code>sonar.web.systemPasscode</code>. This must be configured in <em>$SONARQUBE-HOME/conf/sonar.properties</em>.</p>
<h3>Cluster Status</h3>
<p>On the System Info page at <strong>Administration > System</strong>, you can check whether your cluster is running safely (green) or has some nodes with problems (orange or red).</p>
<h3>Maximum Pending Time for Tasks</h3>
<p>On the global Background Tasks page at <strong>Administration > Projects > Background Tasks</strong>, you can see the number of <strong>pending</strong> tasks as well as the maximum <strong>pending time</strong> for the tasks in the queue. This shows the pending time of the oldest background task waiting to be processed. You can use this to evaluate if it might be worth configuring additional Compute Engine workers (Enterprise Edition) or additional nodes (Data Center Edition) to improve SonarQube performance. </p>
<h2 id="header-6">Compute Engine Workers</h2>
<p>If you change the number of <a href="/SonarQubeChineseDoc8.1/instance-administration/compute-engine-performance/">Compute Engine workers</a> in the UI, you must restart each application node to have the change take effect.</p>
<h2 id="header-7">Project Move</h2>
<p>When the <a href="/SonarQubeChineseDoc8.1/instance-administration/project-move/">Project Move</a> feature is used in a DC installation:</p>
<ul>
<li>Projects are exported on only one of the application nodes </li>
<li>The archive of the exported projects must be copied to all the applications nodes in the target server</li>
</ul>
<h2 id="header-8">Configuration details</h2>
<p>Start with the <a href="/SonarQubeChineseDoc8.1/setup/install-cluster/">default configuration</a>; it's good in most cases. The details below are only needed in specific cases.</p>
<p><a href="https://hazelcast.org/" target="_blank">Hazelcast</a> is used to manage the communication between the nodes of the cluster. You don't need to install it yourself, it's provided out of the box.</p>
<p>The following properties may be defined in the <em>$SONARQUBE-HOME/conf/sonar.properties</em> file of each node in a cluster. When defining a property that contains a list of hosts (<code>*.hosts</code>) the port is not required if the default port was not overridden in the configuration.</p>
<h3>All nodes</h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Default</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sonar.cluster.enabled</code></td>
<td>Set to <code>true</code> in each node to activate the cluster mode</td>
<td><code>false</code></td>
<td>yes</td>
</tr>
<tr>
<td><code>sonar.cluster.name</code></td>
<td>The name of the cluster. <strong>Required if multiple clusters are present on the same network.</strong> For example this prevents mixing Production and Preproduction clusters. This will be the name stored in the Hazelcast cluster and used as the name of the Elasticsearch cluster.</td>
<td><code>sonarqube</code></td>
<td>no</td>
</tr>
<tr>
<td><code>sonar.cluster.search.hosts</code></td>
<td>Comma-delimited list of search hosts in the cluster. Each item in the list must contain the port if the default <code>sonar.search.port</code> value is not used. Item format is <code>sonar.search.host</code> or <code>sonar.search.host:sonar.search.port</code>.</td>
<td></td>
<td>yes</td>
</tr>
<tr>
<td><code>sonar.cluster.node.name</code></td>
<td>The name of the node that is used on Elasticsearch and stored in Hazelcast member attribute (NODE_NAME) for sonar-application</td>
<td><code>sonarqube-{UUID}</code></td>
<td>no</td>
</tr>
<tr>
<td><code>sonar.cluster.node.type</code></td>
<td>Type of node: either <code>application</code> or <code>search</code></td>
<td></td>
<td>yes</td>
</tr>
<tr>
<td><code>sonar.cluster.node.host</code></td>
<td>IP address of the network card that will be used by Hazelcast to communicate with the members of the cluster. If not specified, the first interface will be chosen (note that loopback interfaces won't be selected)</td>
<td></td>
<td>no</td>
</tr>
</tbody>
</table>
<h3>Application nodes</h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Required</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sonar.cluster.hosts</code></td>
<td>Comma-delimited list of all <strong>application</strong> hosts in the cluster. This value must contain <strong>only application hosts</strong>. Each item in the list must contain the port if the default <code>sonar.cluster.node.port</code> value is not used. Item format is <code>sonar.cluster.node.host</code> or <code>sonar.cluster.node.host:sonar.cluster.node.port</code>.</td>
<td>yes</td>
<td></td>
</tr>
<tr>
<td><code>sonar.cluster.node.port</code></td>
<td>The Hazelcast port for communication with each application member of the cluster. Default: <code>9003</code></td>
<td>no</td>
<td></td>
</tr>
<tr>
<td><code>sonar.cluster.node.web.port</code></td>
<td>Hazelcast port for communication with the WebServer process. Port must be accessible to all other search and application nodes. If not specified, a dynamic port will be chosen and all ports must be open among the nodes.</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td><code>sonar.cluster.node.ce.port</code></td>
<td>Hazelcast port for communication with the ComputeEngine process. Port must be accessible to all other search and application nodes. If not specified, a dynamic port will be chosen and all ports must be open among the nodes.</td>
<td>no</td>
<td></td>
</tr>
<tr>
<td><code>sonar.auth.jwtBase64Hs256Secret</code></td>
<td>Required for authentication with multiple web servers. It is used to keep user sessions opened when they are redirected from one web server to another by the load balancer. See <em>$SONARQUBE-HOME/conf/sonar.properties</em>) for details about how to generate this secret key.</td>
<td>yes</td>
<td></td>
</tr>
</tbody>
</table>
<h3>Search nodes</h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Default</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sonar.search.host</code></td>
<td>Listening IP. IP must be accessible to all other search and application nodes.</td>
<td><code>127.0.0.1</code></td>
<td>yes</td>
</tr>
<tr>
<td><code>sonar.search.port</code></td>
<td>Listening port. Port must be accessible to all other search and application nodes.</td>
<td><code>9001</code></td>
<td>yes</td>
</tr>
<tr>
<td><code>sonar.search.initialStateTimeout</code></td>
<td>The timeout for the Elasticsearch nodes to elect a master node. The default value will be fine in most cases, but in a situation where startup is failing because of a timeout, this may need to be adjusted. The value must be set in the format: <code>{integer}{timeunit}</code>. Valid <code>{timeunit}</code> values are: <code>ms</code> (milliseconds); <code>s</code> (seconds); <code>m</code> (minutes); <code>h</code> (hours); <code>d</code> (days); <code>w</code> (weeks)</td>
<td>cluster: 120s; standalone: 30s</td>
<td>no</td>
</tr>
</tbody>
</table>
<h2 id="header-9">Limitations</h2>
<ul>
<li>Cluster downtime is required for SonarQube upgrades or plugin installations.</li>
<li>All application nodes must be stopped when installing, uninstalling or upgrading a plugin.</li>
<li>Plugins are not shared, it means if you install/uninstall/upgrade a given plugin in one application node, you need to perform the same actions on the other application node.</li>
<li>There is no way to perform actions on the cluster from a central app - all operations must be done manually on each node of the cluster.</li>
</ul>
<h2 id="header-10">Frequently Asked Questions</h2>
<h3>Does Elasticsearch discover automatically other ES nodes?</h3>
<p>No. Multicast is disabled. All hosts (IP+port) must be listed.</p>
<h3>Can different nodes run on the same machine?</h3>
<p>Yes, but the best is to have 5 machines to be really resilient to failures.</p>
<h3>Can the members of a cluster be discovered automatically?</h3>
<p>No, all nodes must be configured in <em>$SONARQUBE-HOME/conf/sonar.properties</em></p></div></div></div><div class="page-footer"><a href="https://creativecommons.org/licenses/by-nc/3.0/us/" rel="noopener noreferrer" target="_blank" title="Creative Commons License"><img alt="Creative Commons License" src="https://licensebuttons.net/l/by-nc/3.0/us/88x31.png"/></a>© 2008-2019, SonarSource S.A, Switzerland. Except where otherwise noted, content in this space is licensed under a<!-- --> <a href="https://creativecommons.org/licenses/by-nc/3.0/us/" rel="noopener noreferrer" target="_blank">Creative Commons Attribution-NonCommercial 3.0 United States License.</a> <!-- -->SONARQUBE is a trademark of SonarSource SA. All other trademarks and copyrights are the property of their respective owners.</div></div></div></div></div></div><script src="https://cdn.polyfill.io/v3/polyfill.min.js?features=Promise,fetch,Object.assign,Symbol,Array.from"></script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-page-tsx","jsonName":"setup-operate-cluster-309","path":"/setup/operate-cluster/"};window.dataPath="612/path---setup-operate-cluster-309-7af-pXP4J7Ex7i4eOkpg42ze9ADrUNA";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-56784aebc704702bb251.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-6a082d362ed1573cad1f.js"],"pages-manifest":["/pages-manifest-c56277c8e46414c94f06.js"]};/*]]>*/</script><script src="/SonarQubeChineseDoc8.1/webpack-runtime-d2c6350ccab5ba4688c9.js" async=""></script><script src="/SonarQubeChineseDoc8.1/styles-9b5ac6bbef0df6896858.js" async=""></script><script src="/SonarQubeChineseDoc8.1/app-56784aebc704702bb251.js" async=""></script><script src="/SonarQubeChineseDoc8.1/5-48610aee5c94767ee2f4.js" async=""></script><script src="/SonarQubeChineseDoc8.1/component---src-templates-page-tsx-6a082d362ed1573cad1f.js" async=""></script></body></html>