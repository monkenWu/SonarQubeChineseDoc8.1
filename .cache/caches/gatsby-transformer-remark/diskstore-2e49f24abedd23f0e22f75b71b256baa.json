{"expireTime":9007200835559385000,"key":"transformer-remark-markdown-html-2a99a108474b55cd9f0329e631247420-gatsby-remark-custom-blocks-/SonarQubeChineseDoc8.1","val":"<!-- update_center:javascript -->\n<h2>Prerequisites</h2>\n<p>In order to analyze JavaScript code, you need to have Node.js >= 8 installed on the machine running the scan. Set property <code>sonar.nodejs.executable</code> to an absolute path to Node.js executable, if standard <code>node</code> is not available.</p>\n<h2>Language-Specific Properties</h2>\n<p>Discover and update the JavaScript-specific properties in: <strong><a href=\"/SonarQubeChineseDoc8.1/#sonarqube-admin#/admin/settings?category=javascript\">Administration > General Settings > JavaScript</a></strong></p>\n<h2>Supported Frameworks and Versions</h2>\n<ul>\n<li>ECMAScript 5 / ECMAScript 2015 (ECMAScript 6) / ECMAScript 2016 / ECMAScript 2017</li>\n<li>React JSX</li>\n<li>Vue.js</li>\n<li>Flow</li>\n</ul>\n<h2>Rule Profiles</h2>\n<p>There are 2 built-in rule profiles for JavaScript: <code>Sonar way</code> (default) and <code>Sonar way Recommended</code>.</p>\n<ul>\n<li><code>Sonar way</code> profile is activated by default. It defines a trimmed list of high-value/low-noise rules useful in almost any JS development context.</li>\n<li><code>Sonar way Recommended</code> contains all rules from <code>Sonar way</code>, plus more rules that mandate high code readability and long-term project evolution.</li>\n</ul>\n<h2>Custom rules</h2>\n<div class=\"custom-block alert alert-warning\"><div class=\"custom-block-body\"><p>This feature is deprecated</p></div></div>\n<h3>Overview</h3>\n<p>The JavaScript Analyzer parses the source code, creates an Abstract Syntax Tree (AST) and then walks through the entire tree. A coding rule is a visitor that is able to visit nodes from this AST.</p>\n<p>As soon as the coding rule visits a node, it can navigate the tree around the node and log issues if necessary.</p>\n<h3>Create SonarQube Plugin</h3>\n<p>Custom rules for JavaScript can be added by writing a SonarQube Plugin and using JavaScript analyzer APIs.</p>\n<p>To get started a sample plugin can be found here: <a href=\"https://github.com/SonarSource/sonar-custom-rules-examples/tree/master/javascript-custom-rules\">javascript-custom-rules</a>.\nHere are the step to follow:</p>\n<ul>\n<li>Create a standard SonarQube plugin project</li>\n<li>\n<p>Attach this plugin to the SonarQube JavaScript analyzer through the <code>pom.xml</code>:</p>\n<ul>\n<li>Add the dependency to the JavaScript analyzer.</li>\n<li>\n<p>Add the following line in the sonar-packaging-maven-plugin configuration.</p>\n<pre><code>&#x3C;basePlugin>javascript&#x3C;/basePlugin>\n</code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p>Implement the following extension points:</p>\n<ul>\n<li><a href=\"http://javadocs.sonarsource.org/latest/apidocs/index.html?org/sonar/api/Plugin.html\">Plugin</a></li>\n<li><a href=\"http://javadocs.sonarsource.org/latest/apidocs/index.html?org/sonar/api/server/rule/RulesDefinition.html\">RulesDefinition</a> </li>\n<li><code>CustomRuleRepository</code>, this interface registers rule classes with JavaScript plugin, so they are invoked during analysis of JavaScript files.</li>\n</ul>\n</li>\n<li>Declare <code>RulesDefinition</code> as an extension in the <code>Plugin</code> extension point.</li>\n</ul>\n<p>You can implement both <code>RulesDefinition</code> and <code>CustomRulesRepository</code> in a single class.</p>\n<h3>Implement a Rule</h3>\n<ul>\n<li>\n<p>Create a class that will hold the implementation of the rule. It should:</p>\n<ul>\n<li>Extend <code>DoubleDispatchVisitorCheck</code> or <code>SubscriptionVisitorCheck</code></li>\n<li>Define the rule name, key, tags, etc. with Java annotations.</li>\n</ul>\n</li>\n<li>Declare this class in the <code>RulesDefinition</code>.</li>\n</ul>\n<h3>Implementation Details</h3>\n<h4>Using DoubleDispatchVisitorCheck</h4>\n<p><code>DoubleDispatchVisitorCheck</code> extends <code>DoubleDispatchVisitor</code> which provide a set of methods to visit specific tree nodes (these methods' names start with <code>visit</code>). To explore a part of the AST, override the required method(s). For example, if you want to explore <code>if</code> statement nodes, override the <code>DoubleDispatchVisitor#visitIfStatement</code> method that will be called each time an <code>IfStatementTree</code> node is encountered in the AST.</p>\n<div class=\"custom-block alert alert-warning\"><div class=\"custom-block-body\"><p>When overriding a visit method, you must call the <code>super</code> method in order to allow the visitor to visit the rest of the tree.</p></div></div>\n<h4>Using SubscriptionVisitorCheck</h4>\n<p><code>SubscriptionVisitorCheck</code> extends <code>SubscriptionVisitor</code>. To explore a part of the AST, override <code>SubscribtionVisitor#nodesToVisit()</code> by returning the list of the <code>Tree#Kind</code> of node you want to visit. For example, if you want to explore <code>if</code> statement nodes the method will return a list containing the element <code>Tree#Kind#IF_STATEMENT</code>.</p>\n<h4>Create issues</h4>\n<p>Use these methods to log an issue:</p>\n<ul>\n<li><code>JavaScriptCheck#addIssue(tree, message)</code> creates and returns an instance of <code>PreciseIssue</code>. In the SonarQube UI this issue will highlight all code corresponding to the tree passed as the first parameter. To add cost (effort to fix) or secondary locations provide these values to your just-created instance of <code>PreciseIssue</code>.</li>\n<li><code>JavaScriptCheck#addIssue(issue)</code> creates and returns the instance of <code>Issue</code>. Use this method to create non-standard issues (e.g. for a file-level issue instantiate <code>FileIssue</code>).</li>\n</ul>\n<h4>Check context</h4>\n<p>Check context is provided by <code>DoubleDispatchVisitorCheck</code> or <code>SubscriptionVisitorCheck</code> by calling the <code>JavaScriptCheck#getContext</code> method. Check context provides you access to the root tree of the file, the file itself and the symbol model (information about variables).</p>\n<h4>Test rule</h4>\n<p>To test the rule you can use <code>JavaScriptCheckVerifier#verify()</code> or <code>JavaScriptCheckVerifier#issues()</code>. To be able to use these methods add a dependency to your project:</p>\n<pre><code>&#x3C;dependency>\n  &#x3C;groupId>org.sonarsource.javascript&#x3C;/groupId>\n  &#x3C;artifactId>javascript-checks-testkit&#x3C;/artifactId>\n  &#x3C;version>XXX&#x3C;/version>\n  &#x3C;scope>test&#x3C;/scope>\n&#x3C;/dependency>\n</code></pre>\n<h3>API Changes</h3>\n<h4>SonarJS 4.2.1</h4>\n<ul>\n<li><code>CustomJavaScriptRulesDefinition</code> is deprecated. Implement extension <code>RulesDefinition</code> and <code>CustomRuleRepository</code> instead.</li>\n</ul>\n<h4>SonarJS 4.0</h4>\n<ul>\n<li>Method <code>TreeVisitorContext#getFile()</code> is removed.</li>\n</ul>\n<h2>Related Pages</h2>\n<ul>\n<li><a href=\"/SonarQubeChineseDoc8.1/analysis/coverage/\">Test Coverage &#x26; Execution</a> (LCOV format)</li>\n<li><a href=\"/SonarQubeChineseDoc8.1/analysis/external-issues/\">Importing External Issues</a> (ESLint)</li>\n<li><a href=\"https://github.com/SonarSource/eslint-plugin-sonarjs\">SonarJS Plugin for ESLint</a></li>\n<li><a href=\"/SonarQubeChineseDoc8.1/extend/adding-coding-rules/\">Adding Coding Rules</a></li>\n</ul>"}