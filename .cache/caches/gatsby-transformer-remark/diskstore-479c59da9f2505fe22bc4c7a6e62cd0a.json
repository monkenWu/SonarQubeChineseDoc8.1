{"expireTime":9007200870884084000,"key":"transformer-remark-markdown-ast-db2169dad278abb8a5298cc4d99bdc4d-gatsby-remark-custom-blocks-/SonarQubeChineseDoc8.1","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"Merge Request analysis is available as part of ","position":{"start":{"line":2,"column":2,"offset":3},"end":{"line":2,"column":49,"offset":50},"indent":[]}},{"type":"link","title":null,"url":"https://redirect.sonarsource.com/editions/developer.html","children":[{"type":"text","value":"Developer Edition","position":{"start":{"line":2,"column":50,"offset":51},"end":{"line":2,"column":67,"offset":68},"indent":[]}}],"position":{"start":{"line":2,"column":49,"offset":50},"end":{"line":2,"column":126,"offset":127},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":2,"column":126,"offset":127},"end":{"line":2,"column":131,"offset":132},"indent":[]}},{"type":"link","title":null,"url":"https://www.sonarsource.com/plans-and-pricing/","children":[{"type":"text","value":"above","position":{"start":{"line":2,"column":132,"offset":133},"end":{"line":2,"column":137,"offset":138},"indent":[]}}],"position":{"start":{"line":2,"column":131,"offset":132},"end":{"line":2,"column":186,"offset":187},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":2,"column":186,"offset":187},"end":{"line":2,"column":187,"offset":188},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":2},"end":{"line":2,"column":188,"offset":189},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":2},"end":{"line":2,"column":188,"offset":189},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"SonarScanners running in GitLab CI/CD Jobs will automatically detect branches or Merge Requests being built so you don't need to specifically pass them as parameters to the scanner.","position":{"start":{"line":4,"column":1,"offset":193},"end":{"line":4,"column":182,"offset":374},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":193},"end":{"line":4,"column":182,"offset":374},"indent":[]}},{"type":"warningCustomBlock","children":[{"type":"warningCustomBlockBody","data":{"hName":"div","hProperties":{"className":"custom-block-body"}},"children":[{"type":"paragraph","children":[{"type":"text","value":"You need to disable shallow clone to make sure the scanner has access to all of the branches when running analysis with GitLab CI/CD. See ","position":{"start":{"line":6,"column":1,"offset":378},"end":{"line":6,"column":139,"offset":516},"indent":[]}},{"type":"link","title":null,"url":"https://docs.gitlab.com/ee/user/project/pipelines/settings.html#git-shallow-clone","children":[{"type":"text","value":"Git shallow clone","position":{"start":{"line":6,"column":140,"offset":517},"end":{"line":6,"column":157,"offset":534},"indent":[]}}],"position":{"start":{"line":6,"column":139,"offset":516},"end":{"line":6,"column":241,"offset":618},"indent":[]}},{"type":"text","value":" for more on disabling shallow clone.","position":{"start":{"line":6,"column":241,"offset":618},"end":{"line":6,"column":278,"offset":655},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":378},"end":{"line":6,"column":278,"offset":655},"indent":[]}}]}],"data":{"hName":"div","hProperties":{"className":["custom-block","alert","alert-warning"]}},"position":{"start":{"line":6,"column":1,"offset":378},"end":{"line":7,"column":280,"offset":670},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Activating builds","position":{"start":{"line":9,"column":4,"offset":677},"end":{"line":9,"column":21,"offset":694},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":674},"end":{"line":9,"column":23,"offset":696},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Set up your build according to the section below that corresponds to your SonarQube edition.","position":{"start":{"line":10,"column":1,"offset":698},"end":{"line":10,"column":93,"offset":790},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":698},"end":{"line":10,"column":93,"offset":790},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Developer Edition and above","position":{"start":{"line":12,"column":5,"offset":798},"end":{"line":12,"column":32,"offset":825},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":794},"end":{"line":12,"column":32,"offset":825},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"By default, GitLab will build all branches but not Merge Requests. To build Merge Requests, you need to update the ","position":{"start":{"line":13,"column":1,"offset":827},"end":{"line":13,"column":116,"offset":942},"indent":[]}},{"type":"inlineCode","value":".gitlab-ci.yml","position":{"start":{"line":13,"column":116,"offset":942},"end":{"line":13,"column":132,"offset":958},"indent":[]}},{"type":"text","value":" file by adding ","position":{"start":{"line":13,"column":132,"offset":958},"end":{"line":13,"column":148,"offset":974},"indent":[]}},{"type":"inlineCode","value":"merge_requests","position":{"start":{"line":13,"column":148,"offset":974},"end":{"line":13,"column":164,"offset":990},"indent":[]}},{"type":"text","value":" to the ","position":{"start":{"line":13,"column":164,"offset":990},"end":{"line":13,"column":172,"offset":998},"indent":[]}},{"type":"inlineCode","value":"only","position":{"start":{"line":13,"column":172,"offset":998},"end":{"line":13,"column":178,"offset":1004},"indent":[]}},{"type":"text","value":" parameter. See the ","position":{"start":{"line":13,"column":178,"offset":1004},"end":{"line":13,"column":198,"offset":1024},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Example configurations","position":{"start":{"line":13,"column":200,"offset":1026},"end":{"line":13,"column":222,"offset":1048},"indent":[]}}],"position":{"start":{"line":13,"column":198,"offset":1024},"end":{"line":13,"column":224,"offset":1050},"indent":[]}},{"type":"text","value":" below for more information.","position":{"start":{"line":13,"column":224,"offset":1050},"end":{"line":13,"column":252,"offset":1078},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":827},"end":{"line":13,"column":252,"offset":1078},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Community Edition","position":{"start":{"line":15,"column":5,"offset":1086},"end":{"line":15,"column":22,"offset":1103},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":1082},"end":{"line":15,"column":22,"offset":1103},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Because Community Edition doesn't support branches, you should only analyze your main branch. You can restrict analysis to your main branch by adding the branch name to the ","position":{"start":{"line":16,"column":1,"offset":1105},"end":{"line":16,"column":174,"offset":1278},"indent":[]}},{"type":"inlineCode","value":"only","position":{"start":{"line":16,"column":174,"offset":1278},"end":{"line":16,"column":180,"offset":1284},"indent":[]}},{"type":"text","value":" parameter.","position":{"start":{"line":16,"column":180,"offset":1284},"end":{"line":16,"column":191,"offset":1295},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1105},"end":{"line":16,"column":191,"offset":1295},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Failing the pipeline job when the SonarQube Quality Gate fails","position":{"start":{"line":18,"column":4,"offset":1302},"end":{"line":18,"column":66,"offset":1364},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1299},"end":{"line":18,"column":66,"offset":1364},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In order for the Quality Gate to fail on the GitLab side when the Quality Gate fails on the SonarQube side, the scanner needs to wait for the SonarQube Quality Gate status. To enable this, set the ","position":{"start":{"line":19,"column":1,"offset":1366},"end":{"line":19,"column":198,"offset":1563},"indent":[]}},{"type":"inlineCode","value":"sonar.qualitygate.wait=true","position":{"start":{"line":19,"column":198,"offset":1563},"end":{"line":19,"column":227,"offset":1592},"indent":[]}},{"type":"text","value":" parameter in the ","position":{"start":{"line":19,"column":227,"offset":1592},"end":{"line":19,"column":245,"offset":1610},"indent":[]}},{"type":"inlineCode","value":".gitlab-ci.yml","position":{"start":{"line":19,"column":245,"offset":1610},"end":{"line":19,"column":261,"offset":1626},"indent":[]}},{"type":"text","value":" file. ","position":{"start":{"line":19,"column":261,"offset":1626},"end":{"line":19,"column":268,"offset":1633},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":1366},"end":{"line":19,"column":268,"offset":1633},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can set the ","position":{"start":{"line":21,"column":1,"offset":1637},"end":{"line":21,"column":17,"offset":1653},"indent":[]}},{"type":"inlineCode","value":"sonar.qualitygate.timeout","position":{"start":{"line":21,"column":17,"offset":1653},"end":{"line":21,"column":44,"offset":1680},"indent":[]}},{"type":"text","value":" property to an amount of time (in seconds) that the scanner should wait for a report to be processed. The default is 300 seconds. ","position":{"start":{"line":21,"column":44,"offset":1680},"end":{"line":21,"column":175,"offset":1811},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":1637},"end":{"line":21,"column":175,"offset":1811},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"See the ","position":{"start":{"line":23,"column":1,"offset":1815},"end":{"line":23,"column":9,"offset":1823},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Example configurations","position":{"start":{"line":23,"column":11,"offset":1825},"end":{"line":23,"column":33,"offset":1847},"indent":[]}}],"position":{"start":{"line":23,"column":9,"offset":1823},"end":{"line":23,"column":35,"offset":1849},"indent":[]}},{"type":"text","value":" below for more information.","position":{"start":{"line":23,"column":35,"offset":1849},"end":{"line":23,"column":63,"offset":1877},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1815},"end":{"line":23,"column":63,"offset":1877},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Example configurations","position":{"start":{"line":25,"column":4,"offset":1884},"end":{"line":25,"column":26,"offset":1906},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1881},"end":{"line":25,"column":26,"offset":1906},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The following example configurations show you how to configure the execution of SonarScanner for Gradle, SonarScanner for Maven, and SonarScanner CLI with GitLab CI/CD.","position":{"start":{"line":26,"column":1,"offset":1908},"end":{"line":26,"column":169,"offset":2076},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1908},"end":{"line":26,"column":169,"offset":2076},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the example configurations:","position":{"start":{"line":28,"column":1,"offset":2080},"end":{"line":28,"column":31,"offset":2110},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":2080},"end":{"line":28,"column":31,"offset":2110},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":30,"column":1,"offset":2114},"end":{"line":30,"column":5,"offset":2118},"indent":[]}},{"type":"inlineCode","value":"allow_failure","position":{"start":{"line":30,"column":5,"offset":2118},"end":{"line":30,"column":20,"offset":2133},"indent":[]}},{"type":"text","value":" parameter allows a job to fail without impacting the rest of the CI suite.","position":{"start":{"line":30,"column":20,"offset":2133},"end":{"line":30,"column":95,"offset":2208},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":2114},"end":{"line":30,"column":95,"offset":2208},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":32,"column":1,"offset":2212},"end":{"line":32,"column":5,"offset":2216},"indent":[]}},{"type":"inlineCode","value":"SONAR_TOKEN","position":{"start":{"line":32,"column":5,"offset":2216},"end":{"line":32,"column":18,"offset":2229},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":32,"column":18,"offset":2229},"end":{"line":32,"column":23,"offset":2234},"indent":[]}},{"type":"inlineCode","value":"SONAR_HOST_URL","position":{"start":{"line":32,"column":23,"offset":2234},"end":{"line":32,"column":39,"offset":2250},"indent":[]}},{"type":"text","value":" variables are included. If you don't have environment variables set for all builds in GitLab's settings (as shown in ","position":{"start":{"line":32,"column":39,"offset":2250},"end":{"line":32,"column":157,"offset":2368},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Setting environment variables for all builds","position":{"start":{"line":32,"column":159,"offset":2370},"end":{"line":32,"column":203,"offset":2414},"indent":[]}}],"position":{"start":{"line":32,"column":157,"offset":2368},"end":{"line":32,"column":205,"offset":2416},"indent":[]}},{"type":"text","value":" below), you need to set the variables to pass a ","position":{"start":{"line":32,"column":205,"offset":2416},"end":{"line":32,"column":254,"offset":2465},"indent":[]}},{"type":"link","title":null,"url":"/SonarQubeChineseDoc8.1/user-guide/user-token/","children":[{"type":"text","value":"token","position":{"start":{"line":32,"column":255,"offset":2466},"end":{"line":32,"column":260,"offset":2471},"indent":[]}}],"position":{"start":{"line":32,"column":254,"offset":2465},"end":{"line":32,"column":286,"offset":2497},"indent":[]}},{"type":"text","value":" and the URL of your SonarQube server.","position":{"start":{"line":32,"column":286,"offset":2497},"end":{"line":32,"column":324,"offset":2535},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":2212},"end":{"line":32,"column":324,"offset":2535},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"SonarScanner for Gradle:","position":{"start":{"line":34,"column":5,"offset":2543},"end":{"line":34,"column":29,"offset":2567},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":2539},"end":{"line":34,"column":29,"offset":2567},"indent":[]}},{"type":"code","lang":null,"value":"image: gradle:alpine\nvariables:\n  SONAR_TOKEN: \"your-sonarqube-token\"\n  SONAR_HOST_URL: \"http://your-sonarqube-instance.org\"\n  GIT_DEPTH: 0\nsonarqube-check:\n  stage: test\n  script: gradle sonarqube -Dsonar.qualitygate.wait=true\n  allow_failure: true\n  only:\n    - merge_requests\n    - master","position":{"start":{"line":36,"column":1,"offset":2571},"end":{"line":49,"column":4,"offset":2883},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"SonarScanner for Maven:","position":{"start":{"line":51,"column":5,"offset":2892},"end":{"line":51,"column":28,"offset":2915},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":2888},"end":{"line":51,"column":28,"offset":2915},"indent":[]}},{"type":"code","lang":null,"value":"image: maven:latest\nvariables:\n  SONAR_TOKEN: \"your-sonarqube-token\"\n  SONAR_HOST_URL: \"http://your-sonarqube-url\"\n  GIT_DEPTH: 0\nsonarqube-check:\n  script:\n    - mvn verify sonar:sonar -Dsonar.qualitygate.wait=true\n  allow_failure: true\n  only:\n    - merge_requests\n    - master","position":{"start":{"line":53,"column":1,"offset":2920},"end":{"line":66,"column":4,"offset":3220},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"SonarScanner CLI:","position":{"start":{"line":68,"column":5,"offset":3228},"end":{"line":68,"column":22,"offset":3245},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":3224},"end":{"line":68,"column":22,"offset":3245},"indent":[]}},{"type":"code","lang":null,"value":"image:\n  name: sonarsource/sonar-scanner-cli:latest\n  entrypoint: [\"\"]\nvariables:\n  SONAR_TOKEN: \"your-sonarqube-token\"\n  SONAR_HOST_URL: \"http://your-sonarqube-instance.org\"\n  GIT_DEPTH: 0\nsonarqube-check:\n  stage: test\n  script:\n    - sonar-scanner -Dsonar.qualitygate.wait=true\n  allow_failure: true\n  only:\n    - merge_requests\n    - master","position":{"start":{"line":70,"column":1,"offset":3249},"end":{"line":86,"column":6,"offset":3619},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Note:","position":{"start":{"line":88,"column":3,"offset":3625},"end":{"line":88,"column":8,"offset":3630},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":3623},"end":{"line":88,"column":10,"offset":3632},"indent":[]}},{"type":"text","value":" A project key has to be provided through ","position":{"start":{"line":88,"column":10,"offset":3632},"end":{"line":88,"column":52,"offset":3674},"indent":[]}},{"type":"inlineCode","value":"sonar-project.properties","position":{"start":{"line":88,"column":52,"offset":3674},"end":{"line":88,"column":78,"offset":3700},"indent":[]}},{"type":"text","value":" or through the command line parameter. For more information, see the ","position":{"start":{"line":88,"column":78,"offset":3700},"end":{"line":88,"column":148,"offset":3770},"indent":[]}},{"type":"link","title":null,"url":"/SonarQubeChineseDoc8.1/analysis/scan/sonarscanner/","children":[{"type":"text","value":"SonarScanner","position":{"start":{"line":88,"column":149,"offset":3771},"end":{"line":88,"column":161,"offset":3783},"indent":[]}}],"position":{"start":{"line":88,"column":148,"offset":3770},"end":{"line":88,"column":192,"offset":3814},"indent":[]}},{"type":"text","value":" documentation.","position":{"start":{"line":88,"column":192,"offset":3814},"end":{"line":88,"column":207,"offset":3829},"indent":[]}}],"position":{"start":{"line":88,"column":1,"offset":3623},"end":{"line":88,"column":207,"offset":3829},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Setting environment variables for all builds","position":{"start":{"line":90,"column":4,"offset":3836},"end":{"line":90,"column":48,"offset":3880},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":3833},"end":{"line":90,"column":50,"offset":3882},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Instead of specifying environment variables in your ","position":{"start":{"line":91,"column":1,"offset":3884},"end":{"line":91,"column":53,"offset":3936},"indent":[]}},{"type":"inlineCode","value":".gitlab-ci.yml","position":{"start":{"line":91,"column":53,"offset":3936},"end":{"line":91,"column":69,"offset":3952},"indent":[]}},{"type":"text","value":" file (such as ","position":{"start":{"line":91,"column":69,"offset":3952},"end":{"line":91,"column":84,"offset":3967},"indent":[]}},{"type":"inlineCode","value":"SONAR_TOKEN","position":{"start":{"line":91,"column":84,"offset":3967},"end":{"line":91,"column":97,"offset":3980},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":91,"column":97,"offset":3980},"end":{"line":91,"column":102,"offset":3985},"indent":[]}},{"type":"inlineCode","value":"SONAR_HOST_URL","position":{"start":{"line":91,"column":102,"offset":3985},"end":{"line":91,"column":118,"offset":4001},"indent":[]}},{"type":"text","value":"), you can set them securely for all pipelines in GitLab's settings. See ","position":{"start":{"line":91,"column":118,"offset":4001},"end":{"line":91,"column":191,"offset":4074},"indent":[]}},{"type":"link","title":null,"url":"https://docs.gitlab.com/ee/ci/variables/#creating-a-custom-environment-variable","children":[{"type":"text","value":"Creating a Custom Environment Variable","position":{"start":{"line":91,"column":192,"offset":4075},"end":{"line":91,"column":230,"offset":4113},"indent":[]}}],"position":{"start":{"line":91,"column":191,"offset":4074},"end":{"line":91,"column":312,"offset":4195},"indent":[]}},{"type":"text","value":" for more information.","position":{"start":{"line":91,"column":312,"offset":4195},"end":{"line":91,"column":334,"offset":4217},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":3884},"end":{"line":91,"column":334,"offset":4217},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"For more information","position":{"start":{"line":93,"column":4,"offset":4224},"end":{"line":93,"column":24,"offset":4244},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":4221},"end":{"line":93,"column":24,"offset":4244},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For more information on configuring your build with GitLab CI/CD, see the ","position":{"start":{"line":94,"column":1,"offset":4246},"end":{"line":94,"column":75,"offset":4320},"indent":[]}},{"type":"link","title":null,"url":"https://gitlab.com/help/ci/yaml/README.md","children":[{"type":"text","value":"GitLab CI/CD Pipeline Configuration Reference","position":{"start":{"line":94,"column":76,"offset":4321},"end":{"line":94,"column":121,"offset":4366},"indent":[]}}],"position":{"start":{"line":94,"column":75,"offset":4320},"end":{"line":94,"column":165,"offset":4410},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":94,"column":165,"offset":4410},"end":{"line":94,"column":166,"offset":4411},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":4246},"end":{"line":94,"column":166,"offset":4411},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":95,"column":1,"offset":4413}}}}