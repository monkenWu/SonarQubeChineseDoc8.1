{"expireTime":9007200870884089000,"key":"transformer-remark-markdown-html-582ace755eadb768e67cce7920370284-gatsby-remark-custom-blocks-/SonarQubeChineseDoc8.1","val":"<p><em>Branch analysis is available as part of <a href=\"https://redirect.sonarsource.com/editions/developer.html\">Developer Edition</a> and <a href=\"https://www.sonarsource.com/plans-and-pricing/\">above</a>.</em></p>\n<h2>Overview</h2>\n<p>With Branch Analysis, you can ensure that you're maintaining consistent code quality all the way down to the branch level of your projects. </p>\n<h3>Master / Main Branch</h3>\n<p>This is the default branch and typically corresponds to what's being developed for your next release. This is usually known within a development team as \"master\" or \"head\" and is analyzed when no specific branch parameters are provided. It is labeled \"Main Branch\" and defaults to the name \"master\" but can be renamed from the project settings at <strong>Administration > Branches and Pull Requests</strong>. When you are using Community Edition, this is the only branch you see.</p>\n<h3>Settings and Quality Profiles on Branches</h3>\n<p>Branch settings and quality profiles are the same as those set for the master branch, and by design, it's not possible to configure other values. The New Code Period is the only exception to this as it can be set on a branch-by-branch basis. </p>\n<h3>New Code Period</h3>\n<p>You can set a New Code Period for each branch. This is especially helpful if you are likely to develop and release multiple versions from the branch. See the <a href=\"/SonarQubeChineseDoc8.1/project-administration/new-code-period/\">New Code Period</a> documentation for more information on setting a New Code Period.</p>\n<h3>Quality Gate</h3>\n<p>The branch Quality Gate lets you know if your branch is ready to be merged. Each branch has a quality gate that:</p>\n<ul>\n<li>Applies on conditions on New Code and overall code.</li>\n<li>Assigns a status (Passed or Failed).</li>\n</ul>\n<h2>Setting up Branch analysis</h2>\n<p>A branch is created when the <code>sonar.branch.name</code> parameter is passed during analysis.</p>\n<table>\n<thead>\n<tr>\n<th>Parameter Name</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>sonar.branch.name</code></td>\n<td>Name of the branch (visible in the UI)</td>\n</tr>\n</tbody>\n</table>\n<h3>Limiting analysis to relevant branches</h3>\n<p>You need to add a condition to your pipeline script to ensure only relevant branches are analyzed. For example, you wouldn't want to run analysis on feature branches that won't need analysis until they have pull requests . </p>\n<p>In the following example, analysis would be limited to branches named <code>master</code> or <code>release/*</code>.</p>\n<pre><code>if [[ \"$CI_BRANCH_NAME\" == master ]] || [[ \"$CI_BRANCH_NAME\" == release/* ]]; then\n  ./gradlew sonarqube\nfi\n</code></pre>\n<h3>Issue Creation and Synchronization</h3>\n<p>During the first analysis, issues (type, severity, status, assignee, change log, comments) are synchronized with the Main Branch. In each synchronized issue, a comment is added to the change log of the issue on the branch: \"The issue has been copied from branch 'master' to branch yyy\".</p>\n<p>At each subsequent analysis of the branch, any new issue that comes from a pull request automatically inherits the attributes (type, severity, ...) the issue had in the pull request. A comment is added to the change log of the issue on the branch: \"The issue has been merged from 'xxx' into 'yyy'\"</p>\n<h3>Fetching full Git history</h3>\n<p>By default, some CIs don't fetch your full Git history. For example, TravisCI only fetches the last 50 git commits. You must use <code>git fetch --unshallow</code> to get the full history. If you don't, new issues may not be assigned to the correct developer.</p>\n<h2>Managing inactive branches</h2>\n<p>Inactive branches are branches that are no longer being analyzed. You can use Housekeeping to automatically delete branches that are inactive (i.e. old feature branches) or to keep inactive branches that you want to continue maintaining (i.e. release branches). </p>\n<h3>Deleting inactive branches</h3>\n<p>You can set the number of days a branch can be inactive before it's deleted in the global settings at <strong>Administration > General Settings > Housekeeping > Number of days before deleting inactive branches</strong>. Branches that are inactive for the number of days that you set will be automatically deleted.</p>\n<h3>Using patterns to keep inactive branches</h3>\n<p>You can use naming patterns to protect specific branches, such as release branches, from automatic deletion. To do this, add a pattern using Java regular expressions under <strong>Administration > General Settings > Housekeeping > Branches > Branches to keep when inactive</strong> at either the global or project level. When a branch is created with a name that follows one of these patterns, it will be kept indefinitely. </p>\n<p>For example, adding the pattern <code>release/.*</code> would keep any branches named release/6.0, release/7, and so on.</p>\n<p><strong>Note:</strong> Patterns aren't retroactive and won't apply to branches that have already been created. They only apply to branches created after the pattern is set. You can protect an existing branch at the project level. See the following section.</p>\n<h3>Managing inactive branches at a project level</h3>\n<p>You can set a branch to <strong>Keep when inactive</strong> at the project level from from the <strong>Branches</strong> tab at <strong>Administration > Branches and Pull Requests</strong>. Here, you can also turn off protection for a branch so it will be deleted when it's inactive for the number of days that has been specified in the global settings at <strong>Administration > General Settings > Housekeeping > Number of days before deleting inactive branches</strong>. </p>\n<p><strong>Note:</strong> The main branch is always protected from automatic deletion, even if it's inactive. This can't be changed.</p>"}