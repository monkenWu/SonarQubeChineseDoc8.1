{"expireTime":9007200835559383000,"key":"transformer-remark-markdown-ast-f4cb93bbfac05d7aa73c5bc2d1f4310c-gatsby-remark-custom-blocks-/SonarQubeChineseDoc8.1","val":{"type":"root","children":[{"type":"heading","depth":2,"children":[{"type":"text","value":"Checking the logs","position":{"start":{"line":3,"column":4,"offset":5},"end":{"line":3,"column":21,"offset":22},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":21,"offset":22},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you're having trouble starting your server for the first time (or any subsequent time!) the first thing to do is check your server logs. You'll find them in ","position":{"start":{"line":5,"column":1,"offset":24},"end":{"line":5,"column":161,"offset":184},"indent":[]}},{"type":"inlineCode","value":"$SONARQUBE_HOME/logs","position":{"start":{"line":5,"column":161,"offset":184},"end":{"line":5,"column":183,"offset":206},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":5,"column":183,"offset":206},"end":{"line":5,"column":184,"offset":207},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":24},"end":{"line":5,"column":184,"offset":207},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"sonar.log - Log for the main process. Holds general information about startup and shutdown. You'll get overall status here but not details. Look to the other logs for that.","position":{"start":{"line":7,"column":3,"offset":211},"end":{"line":7,"column":175,"offset":383},"indent":[]}}],"position":{"start":{"line":7,"column":3,"offset":211},"end":{"line":7,"column":175,"offset":383},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":209},"end":{"line":7,"column":175,"offset":383},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"web.log - Information about initial connection to the database, database migration and reindexing, and the processing of HTTP requests. This includes database and search engine logs related to those requests.","position":{"start":{"line":8,"column":3,"offset":386},"end":{"line":8,"column":211,"offset":594},"indent":[]}}],"position":{"start":{"line":8,"column":3,"offset":386},"end":{"line":8,"column":211,"offset":594},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":384},"end":{"line":8,"column":211,"offset":594},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"ce.log - Information about background task processing and the database and search engine logs related to those tasks.","position":{"start":{"line":9,"column":3,"offset":597},"end":{"line":9,"column":120,"offset":714},"indent":[]}}],"position":{"start":{"line":9,"column":3,"offset":597},"end":{"line":9,"column":120,"offset":714},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":595},"end":{"line":9,"column":120,"offset":714},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"es.log - Ops information from the search engine, such as Elasticsearch startup, health status changes, cluster-, node- and index-level operations, etc.","position":{"start":{"line":10,"column":3,"offset":717},"end":{"line":10,"column":154,"offset":868},"indent":[]}}],"position":{"start":{"line":10,"column":3,"offset":717},"end":{"line":10,"column":154,"offset":868},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":715},"end":{"line":10,"column":154,"offset":868},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":209},"end":{"line":10,"column":154,"offset":868},"indent":[1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Understanding the logs","position":{"start":{"line":12,"column":4,"offset":873},"end":{"line":12,"column":26,"offset":895},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":870},"end":{"line":12,"column":26,"offset":895},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When there's an error, you'll very often find a stacktrace in the logs. If you're not familiar stacktraces, they can be intimidatingly tall walls of incomprehensible text. As a sample, here's a fairly short one:","position":{"start":{"line":14,"column":1,"offset":897},"end":{"line":14,"column":212,"offset":1108},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":897},"end":{"line":14,"column":212,"offset":1108},"indent":[]}},{"type":"code","lang":null,"value":"java.lang.IllegalStateException: Unable to blame file **/**/foo.java\n    at org.sonarsource.scm.git.JGitBlameCommand.blame(JGitBlameCommand.java:128)\n    at org.sonarsource.scm.git.JGitBlameCommand.access$000(JGitBlameCommand.java:44)\n    at org.sonarsource.scm.git.JGitBlameCommand$1.call(JGitBlameCommand.java:112)\n    at org.sonarsource.scm.git.JGitBlameCommand$1.call(JGitBlameCommand.java:109)\n    at java.util.concurrent.FutureTask.run(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.NullPointerException\n    at org.eclipse.jgit.treewalk.filter.PathFilter.create(PathFilter.java:77)\n    at org.eclipse.jgit.blame.BlameGenerator.<init>(BlameGenerator.java:161)\n    at org.eclipse.jgit.api.BlameCommand.call(BlameCommand.java:203)\n    at org.sonarsource.scm.git.JGitBlameCommand.blame(JGitBlameCommand.java:126)\n    ... 7 more","position":{"start":{"line":16,"column":1,"offset":1110},"end":{"line":32,"column":4,"offset":2128},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Unless you wrote the code that produced this error, you really only care about:","position":{"start":{"line":34,"column":1,"offset":2130},"end":{"line":34,"column":80,"offset":2209},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":2130},"end":{"line":34,"column":80,"offset":2209},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"the first line, which ought to have a human-readable message after the colon. In this case, it's Unable to blame file ","position":{"start":{"line":35,"column":3,"offset":2212},"end":{"line":35,"column":121,"offset":2330},"indent":[]}},{"type":"inlineCode","value":"**/**/foo.java","position":{"start":{"line":35,"column":121,"offset":2330},"end":{"line":35,"column":137,"offset":2346},"indent":[]}}],"position":{"start":{"line":35,"column":3,"offset":2212},"end":{"line":35,"column":137,"offset":2346},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":2210},"end":{"line":35,"column":137,"offset":2346},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"and any line that starts with ","position":{"start":{"line":36,"column":3,"offset":2349},"end":{"line":36,"column":33,"offset":2379},"indent":[]}},{"type":"inlineCode","value":"Caused by:","position":{"start":{"line":36,"column":33,"offset":2379},"end":{"line":36,"column":45,"offset":2391},"indent":[]}},{"type":"text","value":". There are often several ","position":{"start":{"line":36,"column":45,"offset":2391},"end":{"line":36,"column":71,"offset":2417},"indent":[]}},{"type":"inlineCode","value":"Caused by","position":{"start":{"line":36,"column":71,"offset":2417},"end":{"line":36,"column":82,"offset":2428},"indent":[]}},{"type":"text","value":" lines, and indentation makes them easy to find as you scroll through the error. Be sure to read each of these lines. Very often one of them - the last one or next to last one - contains the real problem.","position":{"start":{"line":36,"column":82,"offset":2428},"end":{"line":36,"column":286,"offset":2632},"indent":[]}}],"position":{"start":{"line":36,"column":3,"offset":2349},"end":{"line":36,"column":286,"offset":2632},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":2347},"end":{"line":36,"column":286,"offset":2632},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":2210},"end":{"line":36,"column":286,"offset":2632},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Recovering from Elasticsearch read-only indices","position":{"start":{"line":38,"column":4,"offset":2637},"end":{"line":38,"column":51,"offset":2684},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":2634},"end":{"line":38,"column":51,"offset":2684},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You may encounter issues with Elasticsearch (ES) indices becoming locked in read-only mode. ES requires free disk space available and implements a safety mechanism to prevent the disk from being flooded with index data that:","position":{"start":{"line":40,"column":1,"offset":2686},"end":{"line":40,"column":225,"offset":2910},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":2686},"end":{"line":40,"column":225,"offset":2910},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"For non-DCE","position":{"start":{"line":42,"column":5,"offset":2916},"end":{"line":42,"column":16,"offset":2927},"indent":[]}}],"position":{"start":{"line":42,"column":3,"offset":2914},"end":{"line":42,"column":18,"offset":2929},"indent":[]}},{"type":"text","value":" –  locks all indices in read-only mode when the 95% used disk usage watermark is reached.  ","position":{"start":{"line":42,"column":18,"offset":2929},"end":{"line":42,"column":110,"offset":3021},"indent":[]}}],"position":{"start":{"line":42,"column":3,"offset":2914},"end":{"line":42,"column":110,"offset":3021},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":2912},"end":{"line":42,"column":110,"offset":3021},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"For DCE","position":{"start":{"line":43,"column":5,"offset":3026},"end":{"line":43,"column":12,"offset":3033},"indent":[]}}],"position":{"start":{"line":43,"column":3,"offset":3024},"end":{"line":43,"column":14,"offset":3035},"indent":[]}},{"type":"text","value":" – locks all or some indices in read-only mode when one or more node reaches the 95% used disk usage watermark.","position":{"start":{"line":43,"column":14,"offset":3035},"end":{"line":43,"column":125,"offset":3146},"indent":[]}}],"position":{"start":{"line":43,"column":3,"offset":3024},"end":{"line":43,"column":125,"offset":3146},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":3022},"end":{"line":43,"column":125,"offset":3146},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":2912},"end":{"line":43,"column":125,"offset":3146},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"ES shows warnings in the logs as soon as disk usage reaches 85% and 90%. At 95% usage and above, indices turning read-only causes errors in the web and compute engine.","position":{"start":{"line":45,"column":1,"offset":3148},"end":{"line":45,"column":168,"offset":3315},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":3148},"end":{"line":45,"column":168,"offset":3315},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Freeing disk space will ","position":{"start":{"line":47,"column":1,"offset":3317},"end":{"line":47,"column":25,"offset":3341},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"not","position":{"start":{"line":47,"column":26,"offset":3342},"end":{"line":47,"column":29,"offset":3345},"indent":[]}}],"position":{"start":{"line":47,"column":25,"offset":3341},"end":{"line":47,"column":30,"offset":3346},"indent":[]}},{"type":"text","value":" automatically make the indices return to read-write. To make indices read-write, you also need to:","position":{"start":{"line":47,"column":30,"offset":3346},"end":{"line":47,"column":129,"offset":3445},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":3317},"end":{"line":47,"column":129,"offset":3445},"indent":[]}},{"type":"list","ordered":false,"start":null,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"For non-DCE","position":{"start":{"line":49,"column":5,"offset":3451},"end":{"line":49,"column":16,"offset":3462},"indent":[]}}],"position":{"start":{"line":49,"column":3,"offset":3449},"end":{"line":49,"column":18,"offset":3464},"indent":[]}},{"type":"text","value":" – restart SonarQube.","position":{"start":{"line":49,"column":18,"offset":3464},"end":{"line":49,"column":39,"offset":3485},"indent":[]}}],"position":{"start":{"line":49,"column":3,"offset":3449},"end":{"line":49,"column":39,"offset":3485},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":3447},"end":{"line":49,"column":39,"offset":3485},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"For DCE","position":{"start":{"line":50,"column":5,"offset":3490},"end":{"line":50,"column":12,"offset":3497},"indent":[]}}],"position":{"start":{"line":50,"column":3,"offset":3488},"end":{"line":50,"column":14,"offset":3499},"indent":[]}},{"type":"text","value":" – restart ","position":{"start":{"line":50,"column":14,"offset":3499},"end":{"line":50,"column":25,"offset":3510},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"ALL","position":{"start":{"line":50,"column":26,"offset":3511},"end":{"line":50,"column":29,"offset":3514},"indent":[]}}],"position":{"start":{"line":50,"column":25,"offset":3510},"end":{"line":50,"column":30,"offset":3515},"indent":[]}},{"type":"text","value":" application nodes (the first application node restarted after all have been stopped will make the indices read-write).  ","position":{"start":{"line":50,"column":30,"offset":3515},"end":{"line":50,"column":151,"offset":3636},"indent":[]}}],"position":{"start":{"line":50,"column":3,"offset":3488},"end":{"line":50,"column":151,"offset":3636},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":3486},"end":{"line":50,"column":151,"offset":3636},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":3447},"end":{"line":50,"column":151,"offset":3636},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"SonarQube's built-in resilience mechanism allows SonarQube to eventually recover from the indices being behind data in the DB (this process can take a while).","position":{"start":{"line":52,"column":1,"offset":3638},"end":{"line":52,"column":159,"offset":3796},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":3638},"end":{"line":52,"column":159,"offset":3796},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you still have inconsistencies, you'll need to rebuild the indices (this operation can take a long time depending on the number of issues and components):","position":{"start":{"line":54,"column":1,"offset":3798},"end":{"line":54,"column":158,"offset":3955},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":3798},"end":{"line":54,"column":158,"offset":3955},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"non-DCE:","position":{"start":{"line":56,"column":3,"offset":3959},"end":{"line":56,"column":11,"offset":3967},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":3957},"end":{"line":56,"column":13,"offset":3969},"indent":[]}},{"type":"text","value":"  ","position":{"start":{"line":56,"column":13,"offset":3969},"end":{"line":56,"column":15,"offset":3971},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":3957},"end":{"line":56,"column":15,"offset":3971},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Stop SonarQube  ","position":{"start":{"line":58,"column":4,"offset":3976},"end":{"line":58,"column":20,"offset":3992},"indent":[]}}],"position":{"start":{"line":58,"column":4,"offset":3976},"end":{"line":58,"column":20,"offset":3992},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":3973},"end":{"line":58,"column":20,"offset":3992},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Delete the data/es6 directory  ","position":{"start":{"line":59,"column":4,"offset":3996},"end":{"line":59,"column":35,"offset":4027},"indent":[]}}],"position":{"start":{"line":59,"column":4,"offset":3996},"end":{"line":59,"column":35,"offset":4027},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":3993},"end":{"line":59,"column":35,"offset":4027},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Restart SonarQube  ","position":{"start":{"line":60,"column":4,"offset":4031},"end":{"line":60,"column":23,"offset":4050},"indent":[]}}],"position":{"start":{"line":60,"column":4,"offset":4031},"end":{"line":60,"column":23,"offset":4050},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":4028},"end":{"line":60,"column":23,"offset":4050},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":3973},"end":{"line":60,"column":23,"offset":4050},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"DCE:","position":{"start":{"line":62,"column":3,"offset":4054},"end":{"line":62,"column":7,"offset":4058},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":4052},"end":{"line":62,"column":9,"offset":4060},"indent":[]}},{"type":"text","value":"  ","position":{"start":{"line":62,"column":9,"offset":4060},"end":{"line":62,"column":11,"offset":4062},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":4052},"end":{"line":62,"column":11,"offset":4062},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":true,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Stop the whole cluster (ES and application nodes)  ","position":{"start":{"line":64,"column":4,"offset":4067},"end":{"line":64,"column":55,"offset":4118},"indent":[]}}],"position":{"start":{"line":64,"column":4,"offset":4067},"end":{"line":64,"column":55,"offset":4118},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":4064},"end":{"line":64,"column":55,"offset":4118},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Delete the data/es6 directory on each ES node  ","position":{"start":{"line":65,"column":4,"offset":4122},"end":{"line":65,"column":51,"offset":4169},"indent":[]}}],"position":{"start":{"line":65,"column":4,"offset":4122},"end":{"line":65,"column":51,"offset":4169},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":4119},"end":{"line":65,"column":51,"offset":4169},"indent":[]}},{"type":"listItem","loose":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Restart the whole cluster  ","position":{"start":{"line":66,"column":4,"offset":4173},"end":{"line":66,"column":31,"offset":4200},"indent":[]}}],"position":{"start":{"line":66,"column":4,"offset":4173},"end":{"line":66,"column":31,"offset":4200},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":4170},"end":{"line":67,"column":5,"offset":4205},"indent":[1]}}],"position":{"start":{"line":64,"column":1,"offset":4064},"end":{"line":67,"column":5,"offset":4205},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Note:","position":{"start":{"line":68,"column":3,"offset":4208},"end":{"line":68,"column":8,"offset":4213},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":4206},"end":{"line":68,"column":10,"offset":4215},"indent":[]}},{"type":"text","value":" See ","position":{"start":{"line":68,"column":10,"offset":4215},"end":{"line":68,"column":15,"offset":4220},"indent":[]}},{"type":"link","title":null,"url":"/SonarQubeChineseDoc8.1/setup/operate-cluster/","children":[{"type":"text","value":"Configure & Operate a Cluster","position":{"start":{"line":68,"column":16,"offset":4221},"end":{"line":68,"column":45,"offset":4250},"indent":[]}}],"position":{"start":{"line":68,"column":15,"offset":4220},"end":{"line":68,"column":71,"offset":4276},"indent":[]}},{"type":"text","value":" for information on stopping and starting a cluster.","position":{"start":{"line":68,"column":71,"offset":4276},"end":{"line":68,"column":123,"offset":4328},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":4206},"end":{"line":68,"column":123,"offset":4328},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":70,"column":1,"offset":4330}}}}