{"expireTime":9007200870884089000,"key":"transformer-remark-markdown-html-ast-3414ac7e735f87c1c956d6245a527349-gatsby-remark-custom-blocks-/SonarQubeChineseDoc8.1","val":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Checking the logs","position":{"start":{"line":4,"column":4,"offset":8},"end":{"line":4,"column":21,"offset":25}}}],"position":{"start":{"line":4,"column":1,"offset":5},"end":{"line":4,"column":21,"offset":25}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you're having trouble starting your server for the first time (or any subsequent time!) the first thing to do is check your server logs. You'll find them in ","position":{"start":{"line":6,"column":1,"offset":29},"end":{"line":6,"column":161,"offset":189}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$SONARQUBE_HOME/logs"}],"position":{"start":{"line":6,"column":161,"offset":189},"end":{"line":6,"column":183,"offset":211}}},{"type":"text","value":":","position":{"start":{"line":6,"column":183,"offset":211},"end":{"line":6,"column":184,"offset":212}}}],"position":{"start":{"line":6,"column":1,"offset":29},"end":{"line":6,"column":184,"offset":212}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"sonar.log - Log for the main process. Holds general information about startup and shutdown. You'll get overall status here but not details. Look to the other logs for that.","position":{"start":{"line":8,"column":3,"offset":218},"end":{"line":8,"column":175,"offset":390}}}],"position":{"start":{"line":8,"column":1,"offset":216},"end":{"line":8,"column":175,"offset":390}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"web.log - Information about initial connection to the database, database migration and reindexing, and the processing of HTTP requests. This includes database and search engine logs related to those requests.","position":{"start":{"line":9,"column":3,"offset":394},"end":{"line":9,"column":211,"offset":602}}}],"position":{"start":{"line":9,"column":1,"offset":392},"end":{"line":9,"column":211,"offset":602}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ce.log - Information about background task processing and the database and search engine logs related to those tasks.","position":{"start":{"line":10,"column":3,"offset":606},"end":{"line":10,"column":120,"offset":723}}}],"position":{"start":{"line":10,"column":1,"offset":604},"end":{"line":10,"column":120,"offset":723}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"es.log - Ops information from the search engine, such as Elasticsearch startup, health status changes, cluster-, node- and index-level operations, etc.","position":{"start":{"line":11,"column":3,"offset":727},"end":{"line":11,"column":154,"offset":878}}}],"position":{"start":{"line":11,"column":1,"offset":725},"end":{"line":11,"column":154,"offset":878}}},{"type":"text","value":"\n"}],"position":{"start":{"line":8,"column":1,"offset":216},"end":{"line":11,"column":154,"offset":878}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Understanding the logs","position":{"start":{"line":13,"column":4,"offset":885},"end":{"line":13,"column":26,"offset":907}}}],"position":{"start":{"line":13,"column":1,"offset":882},"end":{"line":13,"column":26,"offset":907}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When there's an error, you'll very often find a stacktrace in the logs. If you're not familiar stacktraces, they can be intimidatingly tall walls of incomprehensible text. As a sample, here's a fairly short one:","position":{"start":{"line":15,"column":1,"offset":911},"end":{"line":15,"column":212,"offset":1122}}}],"position":{"start":{"line":15,"column":1,"offset":911},"end":{"line":15,"column":212,"offset":1122}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"java.lang.IllegalStateException: Unable to blame file **/**/foo.java\n    at org.sonarsource.scm.git.JGitBlameCommand.blame(JGitBlameCommand.java:128)\n    at org.sonarsource.scm.git.JGitBlameCommand.access$000(JGitBlameCommand.java:44)\n    at org.sonarsource.scm.git.JGitBlameCommand$1.call(JGitBlameCommand.java:112)\n    at org.sonarsource.scm.git.JGitBlameCommand$1.call(JGitBlameCommand.java:109)\n    at java.util.concurrent.FutureTask.run(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.NullPointerException\n    at org.eclipse.jgit.treewalk.filter.PathFilter.create(PathFilter.java:77)\n    at org.eclipse.jgit.blame.BlameGenerator.<init>(BlameGenerator.java:161)\n    at org.eclipse.jgit.api.BlameCommand.call(BlameCommand.java:203)\n    at org.sonarsource.scm.git.JGitBlameCommand.blame(JGitBlameCommand.java:126)\n    ... 7 more\n"}],"position":{"start":{"line":17,"column":1,"offset":1126},"end":{"line":33,"column":4,"offset":2160}}}],"position":{"start":{"line":17,"column":1,"offset":1126},"end":{"line":33,"column":4,"offset":2160}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Unless you wrote the code that produced this error, you really only care about:","position":{"start":{"line":35,"column":1,"offset":2164},"end":{"line":35,"column":80,"offset":2243}}}],"position":{"start":{"line":35,"column":1,"offset":2164},"end":{"line":35,"column":80,"offset":2243}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"the first line, which ought to have a human-readable message after the colon. In this case, it's Unable to blame file ","position":{"start":{"line":36,"column":3,"offset":2247},"end":{"line":36,"column":121,"offset":2365}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"**/**/foo.java"}],"position":{"start":{"line":36,"column":121,"offset":2365},"end":{"line":36,"column":137,"offset":2381}}}],"position":{"start":{"line":36,"column":1,"offset":2245},"end":{"line":36,"column":137,"offset":2381}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"and any line that starts with ","position":{"start":{"line":37,"column":3,"offset":2385},"end":{"line":37,"column":33,"offset":2415}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Caused by:"}],"position":{"start":{"line":37,"column":33,"offset":2415},"end":{"line":37,"column":45,"offset":2427}}},{"type":"text","value":". There are often several ","position":{"start":{"line":37,"column":45,"offset":2427},"end":{"line":37,"column":71,"offset":2453}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Caused by"}],"position":{"start":{"line":37,"column":71,"offset":2453},"end":{"line":37,"column":82,"offset":2464}}},{"type":"text","value":" lines, and indentation makes them easy to find as you scroll through the error. Be sure to read each of these lines. Very often one of them - the last one or next to last one - contains the real problem.","position":{"start":{"line":37,"column":82,"offset":2464},"end":{"line":37,"column":286,"offset":2668}}}],"position":{"start":{"line":37,"column":1,"offset":2383},"end":{"line":37,"column":286,"offset":2668}}},{"type":"text","value":"\n"}],"position":{"start":{"line":36,"column":1,"offset":2245},"end":{"line":37,"column":286,"offset":2668}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Recovering from Elasticsearch read-only indices","position":{"start":{"line":39,"column":4,"offset":2675},"end":{"line":39,"column":51,"offset":2722}}}],"position":{"start":{"line":39,"column":1,"offset":2672},"end":{"line":39,"column":51,"offset":2722}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You may encounter issues with Elasticsearch (ES) indices becoming locked in read-only mode. ES requires free disk space available and implements a safety mechanism to prevent the disk from being flooded with index data that:","position":{"start":{"line":41,"column":1,"offset":2726},"end":{"line":41,"column":225,"offset":2950}}}],"position":{"start":{"line":41,"column":1,"offset":2726},"end":{"line":41,"column":225,"offset":2950}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"For non-DCE","position":{"start":{"line":43,"column":5,"offset":2958},"end":{"line":43,"column":16,"offset":2969}}}],"position":{"start":{"line":43,"column":3,"offset":2956},"end":{"line":43,"column":18,"offset":2971}}},{"type":"text","value":" –  locks all indices in read-only mode when the 95% used disk usage watermark is reached.  ","position":{"start":{"line":43,"column":18,"offset":2971},"end":{"line":43,"column":110,"offset":3063}}}],"position":{"start":{"line":43,"column":1,"offset":2954},"end":{"line":43,"column":110,"offset":3063}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"For DCE","position":{"start":{"line":44,"column":5,"offset":3069},"end":{"line":44,"column":12,"offset":3076}}}],"position":{"start":{"line":44,"column":3,"offset":3067},"end":{"line":44,"column":14,"offset":3078}}},{"type":"text","value":" – locks all or some indices in read-only mode when one or more node reaches the 95% used disk usage watermark.","position":{"start":{"line":44,"column":14,"offset":3078},"end":{"line":44,"column":125,"offset":3189}}}],"position":{"start":{"line":44,"column":1,"offset":3065},"end":{"line":44,"column":125,"offset":3189}}},{"type":"text","value":"\n"}],"position":{"start":{"line":43,"column":1,"offset":2954},"end":{"line":44,"column":125,"offset":3189}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ES shows warnings in the logs as soon as disk usage reaches 85% and 90%. At 95% usage and above, indices turning read-only causes errors in the web and compute engine.","position":{"start":{"line":46,"column":1,"offset":3193},"end":{"line":46,"column":168,"offset":3360}}}],"position":{"start":{"line":46,"column":1,"offset":3193},"end":{"line":46,"column":168,"offset":3360}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Freeing disk space will ","position":{"start":{"line":48,"column":1,"offset":3364},"end":{"line":48,"column":25,"offset":3388}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"not","position":{"start":{"line":48,"column":26,"offset":3389},"end":{"line":48,"column":29,"offset":3392}}}],"position":{"start":{"line":48,"column":25,"offset":3388},"end":{"line":48,"column":30,"offset":3393}}},{"type":"text","value":" automatically make the indices return to read-write. To make indices read-write, you also need to:","position":{"start":{"line":48,"column":30,"offset":3393},"end":{"line":48,"column":129,"offset":3492}}}],"position":{"start":{"line":48,"column":1,"offset":3364},"end":{"line":48,"column":129,"offset":3492}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"For non-DCE","position":{"start":{"line":50,"column":5,"offset":3500},"end":{"line":50,"column":16,"offset":3511}}}],"position":{"start":{"line":50,"column":3,"offset":3498},"end":{"line":50,"column":18,"offset":3513}}},{"type":"text","value":" – restart SonarQube.","position":{"start":{"line":50,"column":18,"offset":3513},"end":{"line":50,"column":39,"offset":3534}}}],"position":{"start":{"line":50,"column":1,"offset":3496},"end":{"line":50,"column":39,"offset":3534}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"For DCE","position":{"start":{"line":51,"column":5,"offset":3540},"end":{"line":51,"column":12,"offset":3547}}}],"position":{"start":{"line":51,"column":3,"offset":3538},"end":{"line":51,"column":14,"offset":3549}}},{"type":"text","value":" – restart ","position":{"start":{"line":51,"column":14,"offset":3549},"end":{"line":51,"column":25,"offset":3560}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"ALL","position":{"start":{"line":51,"column":26,"offset":3561},"end":{"line":51,"column":29,"offset":3564}}}],"position":{"start":{"line":51,"column":25,"offset":3560},"end":{"line":51,"column":30,"offset":3565}}},{"type":"text","value":" application nodes (the first application node restarted after all have been stopped will make the indices read-write).  ","position":{"start":{"line":51,"column":30,"offset":3565},"end":{"line":51,"column":151,"offset":3686}}}],"position":{"start":{"line":51,"column":1,"offset":3536},"end":{"line":51,"column":151,"offset":3686}}},{"type":"text","value":"\n"}],"position":{"start":{"line":50,"column":1,"offset":3496},"end":{"line":51,"column":151,"offset":3686}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"SonarQube's built-in resilience mechanism allows SonarQube to eventually recover from the indices being behind data in the DB (this process can take a while).","position":{"start":{"line":53,"column":1,"offset":3690},"end":{"line":53,"column":159,"offset":3848}}}],"position":{"start":{"line":53,"column":1,"offset":3690},"end":{"line":53,"column":159,"offset":3848}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you still have inconsistencies, you'll need to rebuild the indices (this operation can take a long time depending on the number of issues and components):","position":{"start":{"line":55,"column":1,"offset":3852},"end":{"line":55,"column":158,"offset":4009}}}],"position":{"start":{"line":55,"column":1,"offset":3852},"end":{"line":55,"column":158,"offset":4009}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"non-DCE:","position":{"start":{"line":57,"column":3,"offset":4015},"end":{"line":57,"column":11,"offset":4023}}}],"position":{"start":{"line":57,"column":1,"offset":4013},"end":{"line":57,"column":13,"offset":4025}}},{"type":"text","value":"  ","position":{"start":{"line":57,"column":13,"offset":4025},"end":{"line":57,"column":15,"offset":4027}}}],"position":{"start":{"line":57,"column":1,"offset":4013},"end":{"line":57,"column":15,"offset":4027}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Stop SonarQube  ","position":{"start":{"line":59,"column":4,"offset":4034},"end":{"line":59,"column":20,"offset":4050}}}],"position":{"start":{"line":59,"column":1,"offset":4031},"end":{"line":59,"column":20,"offset":4050}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Delete the data/es6 directory  ","position":{"start":{"line":60,"column":4,"offset":4055},"end":{"line":60,"column":35,"offset":4086}}}],"position":{"start":{"line":60,"column":1,"offset":4052},"end":{"line":60,"column":35,"offset":4086}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Restart SonarQube  ","position":{"start":{"line":61,"column":4,"offset":4091},"end":{"line":61,"column":23,"offset":4110}}}],"position":{"start":{"line":61,"column":1,"offset":4088},"end":{"line":61,"column":23,"offset":4110}}},{"type":"text","value":"\n"}],"position":{"start":{"line":59,"column":1,"offset":4031},"end":{"line":61,"column":23,"offset":4110}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"DCE:","position":{"start":{"line":63,"column":3,"offset":4116},"end":{"line":63,"column":7,"offset":4120}}}],"position":{"start":{"line":63,"column":1,"offset":4114},"end":{"line":63,"column":9,"offset":4122}}},{"type":"text","value":"  ","position":{"start":{"line":63,"column":9,"offset":4122},"end":{"line":63,"column":11,"offset":4124}}}],"position":{"start":{"line":63,"column":1,"offset":4114},"end":{"line":63,"column":11,"offset":4124}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Stop the whole cluster (ES and application nodes)  ","position":{"start":{"line":65,"column":4,"offset":4131},"end":{"line":65,"column":55,"offset":4182}}}],"position":{"start":{"line":65,"column":4,"offset":4131},"end":{"line":65,"column":55,"offset":4182}}},{"type":"text","value":"\n"}],"position":{"start":{"line":65,"column":1,"offset":4128},"end":{"line":65,"column":55,"offset":4182}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Delete the data/es6 directory on each ES node  ","position":{"start":{"line":66,"column":4,"offset":4187},"end":{"line":66,"column":51,"offset":4234}}}],"position":{"start":{"line":66,"column":4,"offset":4187},"end":{"line":66,"column":51,"offset":4234}}},{"type":"text","value":"\n"}],"position":{"start":{"line":66,"column":1,"offset":4184},"end":{"line":66,"column":51,"offset":4234}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Restart the whole cluster  ","position":{"start":{"line":67,"column":4,"offset":4239},"end":{"line":67,"column":31,"offset":4266}}}],"position":{"start":{"line":67,"column":4,"offset":4239},"end":{"line":67,"column":31,"offset":4266}}},{"type":"text","value":"\n"}],"position":{"start":{"line":67,"column":1,"offset":4236},"end":{"line":68,"column":5,"offset":4272}}},{"type":"text","value":"\n"}],"position":{"start":{"line":65,"column":1,"offset":4128},"end":{"line":68,"column":5,"offset":4272}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Note:","position":{"start":{"line":69,"column":3,"offset":4276},"end":{"line":69,"column":8,"offset":4281}}}],"position":{"start":{"line":69,"column":1,"offset":4274},"end":{"line":69,"column":10,"offset":4283}}},{"type":"text","value":" See ","position":{"start":{"line":69,"column":10,"offset":4283},"end":{"line":69,"column":15,"offset":4288}}},{"type":"element","tagName":"a","properties":{"href":"/SonarQubeChineseDoc8.1/setup/operate-cluster/"},"children":[{"type":"text","value":"Configure & Operate a Cluster","position":{"start":{"line":69,"column":16,"offset":4289},"end":{"line":69,"column":45,"offset":4318}}}],"position":{"start":{"line":69,"column":15,"offset":4288},"end":{"line":69,"column":71,"offset":4344}}},{"type":"text","value":" for information on stopping and starting a cluster.","position":{"start":{"line":69,"column":71,"offset":4344},"end":{"line":69,"column":123,"offset":4396}}}],"position":{"start":{"line":69,"column":1,"offset":4274},"end":{"line":69,"column":123,"offset":4396}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":72,"column":1,"offset":4401}}}}